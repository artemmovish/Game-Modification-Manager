
[core]
name: M_SE hide
displayText: Silent Enforcer
displayDescription: The stealth devision of the Enforcers make a move! \n -Can plant bombs while camoflaged. \n -Can fire sniper rifle while not camoflaged. \n-Bombs can be removed with laser defence and take time to detonate.   
class: CustomUnitMetadata
price: 3000
maxHp: 200
mass: 100

borrowResourcesWhileAlive: TotalUnit=-1, Ground=-1, Cliff=-1, AG=-1, AA=-1, AntiArmour=-1, Artillery=-1, AS=-1, Stealth=-3
tags: Unit, Ground, Cliff, AG, AA, AntiArmour, Small, Range, AS, stealth, isStealth

techLevel: 2
buildSpeed: 0.0010
#availableInDemo: true

radius: 9
displayRadius: 12

isBio: true
softCollisionOnAll: 2



canOnlyBeAttackedByUnitsWithTags: anti-stealth



[hiddenAction_Started]
takeResources: EGround=-1, ECliff=-1, EAG=-1, EAA=-1, EAntiArmour=-1, EArtillery=-1, EAS=-1, EStealth=-3
[hiddenAction_Started_UpdateAlly]
takeResources: Ground=-1, Cliff=-1, AG=-1, AA=-1, AntiArmour=-1, Artillery=-1, AS=-1, Stealth=-3
[hiddenAction_Killed]
takeResources: EGround=1, ECliff=1, EAG=1, EAA=1, EAntiArmour=1, EArtillery=1, EAS=1, EStealth=3
[hiddenAction_Killed_UpdateAlly]
takeResources: Ground=1, Cliff=1, AG=1, AA=1, AntiArmour=1, Artillery=1, AS=1, Stealth=3
#TotalUnit=-1




[action_switchStealth]

convertTo: M_SE
buildSpeed: 0s
text: Attack mode
isVisible: true
#isLocked: if not self.hasUnitInTeam(withTag='Armoury', greaterThan=0, withinRange=150)
whenBuilding_cannotMove: true
autoTrigger: if self.isControlledByAI() and self.hp(full=true) and numberOfUnitsInEnemyTeam(withinRange=350, lessThan=2)
descriptionAddUnitStats: ${section.convertTo}


[hiddenAction_retreat]
autoTrigger: if self.isControlledByAI() and numberOfUnitsInEnemyTeam(withTag='anti-stealth', withinRange=300, greaterThan=0) and not self.hasActiveWaypoint(type='move')
clearAllWaypoints: false
addWaypoint_prepend: true
addWaypoint_type: move
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_tagged: Safety
alsoQueueAction: switchStealth




[graphics]
total_frames: 1

image:        silent.png
image_wreak:  NONE
image_turret: NONE

image_shadow: AUTO
shadowOffsetX:0.5
shadowOffsetY:0.5

imageScale:0.6

dustEffect: false

lock_body_rotation_with_main_turret: true
isVisibleToEnemies: false


[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 1
turretTurnSpeed: 5

isFixedFiring: true

maxAttackRange: 45

aimOffsetSpread: 0
shootDelay: 10




[turret_1]
#KABOOOOM
x: 2
y: 2

#invisible: true
projectile: 1

turnSpeed: 4.0
turnSpeedAcceleration: 1.0

shoot_sound: NONE

delay: 300
warmup: 550

canShoot: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
limitingMinRange: 30




[projectile_1]
tags: mine
directDamage: 0
speed: 0.25
#life: 1800
life: 5s
trailEffect: false
image: bomb.png
largeHitEffect: true
targetGround: true
areaDamage: 750
areaRadius: 150
deflectionPower: 10
buildingDamageMultiplier: 3
explodeOnEndOfLife: true
friendlyFire: false








[movement]
movementType: OVER_CLIFF_WATER
moveSpeed: 0.75
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.2

targetHeight: -2

maxTurnSpeed: 2.5
turnAcceleration: 0.2

moveSlidingMode :false
moveIgnoringBody:false
