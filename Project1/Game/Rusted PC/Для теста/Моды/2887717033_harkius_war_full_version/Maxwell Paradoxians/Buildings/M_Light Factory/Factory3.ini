[core]
name: M_LightFac3
displayText: Vehicle Factory 
displayDescription: -Facility for building vehicles \n- Can be upgraded for better defences.  
class: CustomUnitMetadata
price: 7550
maxHp: 5500
mass: 9000
copyFrom: Factory2.ini
generation_credits: 2
generation_delay: 40

borrowResourcesWhileAlive: Armour=-1, AG=-1, AA=-1
tags: NoCap, Building, Factory, Turret, AG, AA, Armour

techLevel: 3
buildSpeed: 0.001
#availableInDemo: true




armour: 7



[action_upgrade_1]
isVisible: false





[hiddenAction_Started]
takeResources: EArmour=-1, EAG=-1, EAA=-1, ETurret=-1
[hiddenAction_Started_UpdateAlly]
takeResources: Armour=-1, AG=-1, AA=-1
[hiddenAction_Killed]
takeResources: EArmour=1, EAG=1, EAA=1, ETurret=1
[hiddenAction_Killed_UpdateAlly]
takeResources: Armour=-1, AG=-1, AA=-1
#TotalUnit=-1


[canBuild_Rhino]
name: M_Rhino
pos: 5
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) and self.hasUnitInTeam(withTag='Unit', greaterThan=5) or self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Range', greaterThan=0) and not self.hasUnitInTeam(withTag='Q_AntiArmour', greaterThan=0) or self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_AG', greaterThan=0)


[canBuild_Exp]
name: M_Ly_Mo
pos: 6
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) and self.hasUnitInTeam(withTag='Unit', greaterThan=5)




[hiddenAction_builder1]
autoTrigger: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='builder', greaterThan=0, withinRange=800) and not self.hasUnitInTeam(withTag='builder', greaterThan=20) and self.hasResources(credits=16000) and not self.hasFlag(id=1) or self.isControlledByAI() and self.numberOfUnitsInTeam(withTag='NeedFix', withinRange=500) > self.numberOfUnitsInTeam(withTag='builder', withinRange=600) and self.hasResources(credits=25000) and not self.hasUnitInTeam(withTag='builder', greaterThan=50) and not self.hasFlag(id=1)
alsoQueueAction: builder2
addResources: setFlag=1, credits=-7500

[hiddenAction_builder2]
buildSpeed: 33s
#addResources: credits=-4500
alsoQueueAction: FinishBuild
spawnUnits: M comtank





[hiddenAction_QuotaScarabTank]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='Q_AA', greaterThan=0) and self.hasResources(credits=30000) and not self.hasFlag(id=1) and self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) or self.isControlledByAI() and self.hasUnitInTeam(withTag='Q_Water', greaterThan=0) and self.hasResources(credits=30000) and not self.hasFlag(id=1) and self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) or self.isControlledByAI() and self.hasUnitInTeam(withTag='Q_AntiLD', greaterThan=0) and self.hasResources(credits=30000) and not self.hasFlag(id=1) and self.hasUnitInTeam(withTag='Q_Land', greaterThan=0)
alsoQueueAction: QuotaScarabTank2
addResources: setFlag=1, credits=-4000

[hiddenAction_QuotaScarabTank2]
buildSpeed: 38s
alsoQueueAction: FinishBuild
spawnUnits: M_Scarab



[hiddenAction_QuotaRange]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='Q_Range', greaterThan=0) and self.hasResources(credits=45000) and not self.hasFlag(id=1) and self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) or self.isControlledByAI() and self.hasUnitInTeam(withTag='Q_AntiArmour', greaterThan=0) and self.hasResources(credits=45000) and not self.hasFlag(id=1) and self.hasUnitInTeam(withTag='Q_Land', greaterThan=0)
alsoQueueAction: QuotaRange2
addResources: setFlag=1, credits=-7500

[hiddenAction_QuotaRange2]
buildSpeed: 60s
alsoQueueAction: FinishBuild
spawnUnits: M_Rhino 


[hiddenAction_QuotaShield]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='Q_Shield', greaterThan=0) and self.hasResources(credits=65000) and not self.hasFlag(id=1) and self.hasUnitInTeam(withTag='Q_Land', greaterThan=0)
alsoQueueAction: QuotaShield2
addResources: setFlag=1, credits=-17000

[hiddenAction_QuotaShield2]
buildSpeed: 80s
alsoQueueAction: FinishBuild
spawnUnits: M_Ly_Mo



[hiddenAction_QLD]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='Q_LD', greaterThan=0) and self.hasResources(credits=50000) and not self.hasFlag(id=1) and self.hasUnitInTeam(withTag='Q_Land', greaterThan=0)
alsoQueueAction: QLD2
addResources: setFlag=1, credits=-7500

[hiddenAction_QLD2]
buildSpeed: 33s
#addResources: credits=-4500
alsoQueueAction: FinishBuild
spawnUnits: M comtank




[hiddenAction_Numbers]
autoTrigger: if self.isControlledByAI() and self.hasResources(credits=25000) and not self.hasFlag(id=1) and self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) and not self.hasUnitInTeam(withTag='Q_AntiArmour', greaterThan=0)
alsoQueueAction: Numbers2
addResources: setFlag=1, credits=-1300

[hiddenAction_Numbers2]
buildSpeed: 16s
alsoQueueAction: FinishBuild
spawnUnits: M_Shadow








[graphics]
total_frames: 1

image:        light3.png
image_back: base.png
image_wreak:  ruin.png



[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3


maxAttackRange: 550
shootDelay: 100
turretMultiTargeting: true


[turret_1]

#right gunning arm

x: 25
y: 36
projectile: 1

turnSpeed: 3
turnSpeedAcceleration: 0.5

shoot_sound:large_gun_fire1
shoot_sound_vol:0.2
shoot_flame:shockwave
shoot_light:#FFFFFFAA

canShoot: true

delay: 15
warmup:15

image: turret.png
recoilOffset: -3
recoilOutTime: 3
recoilReturnTime: 6

idleSpin: -1



[turret_2]

#right gunning arm

x: -25
y: -15
projectile: 1

turnSpeed: 3
turnSpeedAcceleration: 0.5

shoot_sound:large_gun_fire1
shoot_sound_vol:0.2
shoot_flame:shockwave
shoot_light:#FFFFFFAA

canShoot: true

delay: 15
warmup:15

image: turret.png
recoilOffset: -3
recoilOutTime: 3
recoilReturnTime: 6

idleSpin: 1



[turret_3]

#right gunning arm

x: 8
y: 23
projectile: 1

turnSpeed: 3
turnSpeedAcceleration: 0.5

shoot_sound:large_gun_fire1
shoot_sound_vol:0.2
shoot_flame:shockwave
shoot_light:#FFFFFFAA

canShoot: true

delay: 15
warmup:15

image: turret.png
recoilOffset: -3
recoilOutTime: 3
recoilReturnTime: 6

idleSpin: 0.3





[projectile_1]
#directDamage: 22
life: 2
speed: 7

targetGround: true
targetGroundSpread: 65

trailEffect: false
largeHitEffect: true
lightColor: #ff0000
lightSize: 0.8
drawSize: 1.3

pushForce: 7500

areaDamage: 20
areaRadius: 5
areaDamageNoFalloff: true
areaRadiusFromEdge: true


deflectionPower:0.4


explodeEffect: NONE

explodeOnEndOfLife: true
spawnProjectilesOnExplode:Bullet(yOffsetRelative=10,offsetRandomDir=0,recursionLimit=1)


[projectile_Bullet]
directDamage: 20
life: 120
speed: 7

@copyFromSection: projectile_1

targetGround: false
targetGroundSpread: IGNORE

areaDamage: 0
areaRadius: 0

turnSpeed:0.2

areaRadiusFromEdge: true
retargetingInFlight: true
retargetingInFlightSearchDelay: 0
retargetingInFlightSearchRange: 75
retargetingInFlightSearchLead:0

explodeOnEndOfLife: false
spawnProjectilesOnExplode: IGNORE








[ai]



upgradedFrom: M_LightFac



