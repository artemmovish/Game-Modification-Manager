[core]
name: M_WalkFac3
displayText: Walker Factory 
displayDescription: -Factory for the production of mechs and HAD units \n- Can repair and shoot ground targets.  
class: CustomUnitMetadata
price: 8000
maxHp: 1500
mass: 9000

copyFrom: Factory2.ini
borrowResourcesWhileAlive: AG=-1
tags: NoCap, Factory, Building, Repair, Turret, AG


techLevel: 3
buildSpeed: 0.0007
#availableInDemo: true


canRepairBuildings: true
canRepairUnits : true


canReclaimResources: true


autoRepair: true


nanoRange: 290


nanoRepairSpeed: 0.7
nanoBuildSpeed: 1



[action_upgrade_1]
@copyFrom_skipThisSection: true

[hiddenAction_Started]
takeResources: EAG=-1, ETurret=-1
[hiddenAction_Started_UpdateAlly]
takeResources: AG=-1
[hiddenAction_Killed]
takeResources: EAG=1, ETurret=1
[hiddenAction_Killed_UpdateAlly]
takeResources: AG=1
#TotalUnit=-1

[canBuild_Big]
name: M_Elephant
pos: 5
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Cliff', greaterThan=0) and self.hasUnitInTeam(withTag='Unit', greaterThan=5) or self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_AG', greaterThan=0) and not self.hasUnitInTeam(withTag='Q_Range', greaterThan=0) and not self.hasUnitInTeam(withTag='Q_AntiArmour', greaterThan=0)


[canBuild_Exp]
name: M_HE
pos: 6
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) and self.hasUnitInTeam(withTag='Unit', greaterThan=5)

[canBuild_Centi]
name: M_Centipede
pos: 6



[hiddenAction_builderCenti]
autoTrigger: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='builder', greaterThan=0, withinRange=750) and not self.hasUnitInTeam(withTag='builder', greaterThan=30) and self.hasResources(credits=300000) and not self.hasFlag(id=1)
alsoQueueAction: builderC2
addResources: setFlag=1, credits=-100000

[hiddenAction_builderC2]
buildSpeed: 85s
#addResources: credits=-100000
alsoQueueAction: FinishBuild
spawnUnits: M_Centipede





[hiddenAction_QuotaEle]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='Q_AG', greaterThan=0) and self.hasUnitInTeam(withTag='Q_AntiArmour', greaterThan=0) and self.hasResources(credits=60000) and not self.hasFlag(id=1) and self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) and self.hasUnitInTeam(withTag='Q_Cliff', greaterThan=0)
alsoQueueAction: QuotaEle2
addResources: setFlag=1, credits=-13000

[hiddenAction_QuotaEle2]
buildSpeed: 70s
alsoQueueAction: FinishBuild
spawnUnits: M_Elephant


[hiddenAction_QuotaAG]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='Q_AG', greaterThan=0) and not self.hasUnitInTeam(withTag='Q_AntiArmour', greaterThan=0) and self.hasResources(credits=25000) and not self.hasFlag(id=1) and self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) and self.hasUnitInTeam(withTag='Q_Cliff', greaterThan=0)
alsoQueueAction: QuotaAG2
addResources: setFlag=1, credits=-2500

[hiddenAction_QuotaAG2]
buildSpeed: 26s
alsoQueueAction: FinishBuild
spawnUnits: M_scor


[hiddenAction_EndgameTank1]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='Q_AA', greaterThan=0) and self.hasUnitInTeam(withTag='Q_AG', greaterThan=0) and self.hasResources(credits=100000) and not self.hasFlag(id=1) and self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) and self.hasUnitInTeam(withTag='Q_Cliff', greaterThan=0)
alsoQueueAction: EndgameTank2
addResources: setFlag=1, credits=-52000

[hiddenAction_EndgameTank2]
buildSpeed: 130s
alsoQueueAction: FinishBuild
spawnUnits: M_HE



[graphics]
total_frames: 1

image:        WF2.png
image_back: base.png
image_wreak:  ruin.png

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1




[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3


maxAttackRange: 300
shootDelay: 10


[turret_nanoTurret]
x: 0
y: 0
warmup: 10
turnSpeed: 20
invisible: true
canShoot: true

isMainNanoTurret: true


[turret_2]

#right gunning arm

x: 0
y: 25
projectile: 1

turnSpeed: 3
turnSpeedAcceleration: 0.5

shoot_sound:ROOT:Audio/rocket1.wav
shoot_sound_vol:1
shoot_flame:small
shoot_light:#FFFFFFAA

canShoot: true

delay: 75
warmup: 50

image: turret.png
recoilOffset: -5
recoilOutTime: 5
recoilReturnTime: 10



[projectile_1]
directDamage: 1
life: 150
speed: 5

image: shot.png

areaDamage: 95
areaRadius: 80

largeHitEffect: true
targetGround: true
trailEffect: CUSTOM:projectileTrail
trailEffectRate:0.2

initialUnguidedSpeedHeight: 2.5
gravity:0.6
lightCastOnGround: true
pushForce: 5000


[effect_projectileTrail]
image: trail.png
life: 10
fadeOut: true
attachedToUnit: false
fadeInTime:1
scaleFrom: 1
scaleTo: 0.5
alpha: 0.6
drawUnderUnits:true
#ySpeedRelative:-1




[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1



[ai]

upgradedFrom: M_WalkFac
useAsBuilder: true




