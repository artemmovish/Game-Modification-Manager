
[core]
name: M_Wither
displayText: Wither beam turret 
displayDescription: -Low damage sniper turret. \n-Targets land and air units with a long range disruptor beam.\n-Targets stealth and submarines.\n-Far stronger against shields.\n-Cannot target buildings.
class: CustomUnitMetadata
price: 2000
maxHp: 700
mass: 9000


copyFrom: ROOT:Building_AI_Base.ini
borrowResourcesWhileAlive: AA=-1, AG=-1, AntiShield=-1, AntiStealth=-1, AS=-1
tags: Building, Turret, AntiShield, AA, AG, anti-stealth, AS, AStealth

#footprint used for collisions with units (left, up, right, down)
footprint: -1,-1,0,0
#used for placement, and placement of other buildings
constructionFootprint: -1, -1, 0, 0

buildingToFootprintOffsetX:0
buildingToFootprintOffsetY:0

selfRegenRate:0.08




disableAllUnitCollisions: true




techLevel: 1
buildSpeed: 0.002
#availableInDemo: true

radius: 15
#displayRadius: 80
isBio: false
isBuilding: true



softCollisionOnAll: 3


#builtFrom_1_name: landFactory
#builtFrom_1_pos:  5


[hiddenAction_Started]
takeResources: EAA=-1, EAG=-1, EAntiShield=-1, EAntiStealth=-1, EAS=-1
[hiddenAction_Started_UpdateAlly]
takeResources: AA=-1, AG=-1, AntiShield=-1, AntiStealth=-1, AS=-1
[hiddenAction_Killed]
takeResources: EAA=1, EAG=1, EAntiShield=1, EAntiStealth=1, EAS=1
[hiddenAction_Killed_UpdateAlly]
takeResources: AA=1, AG=1, AntiShield=1, AntiStealth=1, AS=1
#TotalUnit=-1



[hiddenAction_Stealth]
autoTrigger: if self.isControlledByAI() and numberOfUnitsInEnemyTeam(withTag='stealth', greaterThan=0, withinRange=700) 
clearAllWaypoints: true
addWaypoint_prepend: true
addWaypoint_type: attack
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_tagged: stealth


[hiddenAction_Attack]
autoTrigger: if self.isControlledByAI() and not numberOfUnitsInEnemyTeam(withTag='stealth', greaterThan=0, withinRange=700) and numberOfUnitsInEnemyTeam(withTag='Unit', greaterThan=0, withinRange=700)
clearAllWaypoints: true
addWaypoint_prepend: true
addWaypoint_type: attack
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_tagged: Unit





[graphics]
total_frames: 1

image:        tb.png
image_back: NONE
image_wreak:  NONE

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1




[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: true

turretSize: 20
turretTurnSpeed: 0.7


maxAttackRange: 700
shootDelay: 100
turretMultiTargeting: true
aimOffsetSpread: 0


[turret_1]

#right gunning arm

x: 0
y: 3
projectile: 1

turnSpeed: 0.5
turnSpeedAcceleration: 0.02

shoot_sound:ROOT:Audio/Blaster1.ogg
shoot_sound_vol:0.03
shoot_flame:small
shoot_light:#FFFFFFAA

image: wither.png

canShoot: true

delay: 2
warmup: 1

recoilOffset: -1
recoilOutTime: 1
recoilReturnTime: 3
canOnlyAttackUnitsWithoutTags: Building


[projectile_1]
directDamage: 1
life: 150
speed: 25

image: beam.png

trailEffect: CUSTOM:projectileTrail
trailEffectRate:0.2
explodeEffect: CUSTOM:projectilePassThough2

shieldDamageMultiplier: 5
shieldDefectionMultiplier: 0.4
armourIgnoreAmount: 4
deflectionPower: -1
#buildingDamageMultiplier: 0.05
pushForce: 400

mutator1_ifUnitWithTags: ShieldGen
mutator1_directDamageMultiplier: 0.2




[effect_projectilePassThough2]

priority:high
image: beam.png
life: 20
fadeOut: true
attachedToUnit: false
color: #FFFFFF
scaleFrom: 0.4
scaleTo: 0.05
alpha: 1
drawUnderUnits:false
ySpeedRelative:2
atmospheric: true

[effect_projectileTrail]
image: beam.png
life: 10
fadeOut: true
attachedToUnit: false
fadeInTime:1
scaleFrom: 1
scaleTo: 0.5
alpha: 0.6
drawUnderUnits:true
#ySpeedRelative:-1


[movement]
movementType: LAND
#OVER_CLIFF
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1



[ai]

buildPriority: 0.35


#maxEachBase: 4



