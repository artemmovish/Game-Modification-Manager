[core]
name: M_SkyC
displayText: Sky Control Platform
displayDescription: An airborne command base. \n-Limited laser defence and firepower. \n-Reduced build speed. \n-Can create some aircraft slightly faster than normal. \n-Can create anti-nukes.
class: CustomUnitMetadata

price: 13000
maxHp: 1000
mass: 15000

copyFrom: ROOT:Builder_AI.ini
borrowResourcesWhileAlive: TotalUnit=-1, Air=-3, AG=-1, AntiShield=1, AntiLD=-1, LD=-1, Shield=-2, Beam=-3
tags: Unit, Air2, AG, LD, Beam2, ALD, CanFollow, Factory, builder, NoCap, antinuke, Shield

isPickableStartingUnit: false

techLevel: 2
experimental: false

buildSpeed: 0.00035





#armour: 5

radius: 25
displayRadius: 40

maxShield: 200
shieldRegen: 0.3

energyMax: 2
energyRegen: 0.0045
energyNeedsToRechargeToFull: true

transportSlotsNeeded: 2


isBio: false
isBuilder: true



canRepairBuildings: true
canRepairUnits : true


canReclaimResources: true


autoRepair: false


nanoRange: 120


nanoRepairSpeed: 0.2
nanoBuildSpeed: 0.8
nanoFactorySpeed: 1.2



[hiddenAction_Started]
takeResources: EAir=-3, EAG=-1, EAntiShield=1, EAntiLD=-1, ELD=-1, EShield=-2, EBeam=-3
[hiddenAction_Started_UpdateAlly]
takeResources: Air=-3, AG=-1, AntiShield=1, AntiLD=-1, LD=-1, Shield=-2, Beam=-3
[hiddenAction_Killed]
takeResources: EAir=3, EAG=1, EAntiShield=-1, EAntiLD=1, ELD=1, EShield=2, EBeam=3
[hiddenAction_Killed_UpdateAlly]
takeResources: Air=3, AG=1, AntiShield=-1, AntiLD=1, LD=1, Shield=2, Beam=3
#TotalUnit=-1


[canBuild_units]
name: M_Cestral, M_Scout, M_Comet
pos: 0.1

[canBuild_1]
name: reclaim
pos: -1
#isLocked: false
#isLockedMessage: NONE
#isGuiBlinking: if not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000)

[canBuild_economy]
name: M_Extractor, M_Fabric1
pos: 1



[canBuild_turrets]
name: M_G1, M_A1, M_SG1, M_SA1, M_T1, M_Skyfire turret1
pos: 2
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000) and numberOfUnitsInEnemyTeam(withTag='Obomb', greaterThan=0, withinRange=1000)


[canBuild_buildings]
name: M_LightFac, M_WalkFac, M_Air, M_Barrac, M_Dock
pos: 3
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000) and numberOfUnitsInEnemyTeam(withTag='Obomb', greaterThan=0, withinRange=1000)



[canBuild_antiorbit]
name: M_ORBs
pos: 2
isGuiBlinking: if not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000)



[hiddenAction_buildAO]
autoTrigger: if self.isControlledByAI() and self.NumberOfUnitsInTeam(withTag='Q_AO', greaterThan=0) and self.hasResources(credits=32000) and not self.tags(includes='Formation') and not self.tags(includes='Retreat') and not self.tags(includes='Attacking') and not self.tags(includes='DEFEND') and not self.hasActiveWaypoint(type='build')
requireConditional: if self.NumberOfUnitsInTeam(withTag='AOTurret', lessThan=1, withinRange=400) and self.NumberOfUnitsInTeam(withTag='Factory', greaterThan=0, withinRange=250)
addWaypoint_unitType: M_ORBs
addResources: credits=-8000



[hiddenAction_Healed]
autoTrigger: if self.isControlledByAI() and self.hp(greaterThan=950)
temporarilyRemoveTags: Retreat

[hiddenAction_Damaged]
autoTrigger: if self.isControlledByAI() and self.hp(lessThan=850)
temporarilyAddTags: Retreat



[action_buildAntiNuke]
price:  4200
text: i:gui.actions.buildAntiNuke
description: Builds anti-nuke interceptor missiles. \n-Max of 2 in storage. 
displayType: NONE
buildSpeed: 25s
pos: 0.2
isActive:if self.ammoIncludingQueued(lessThan=2)
addResources: ammo=1
isLocked: if not game.nukesEnabled()
ai_isDisabled: if self.ammo(greaterThan=2)



[action_showAntiNukeCount]
#infoOnly: true
addResources: ammo=1
price:  ammo=1
text: i:gui.actions.antiNukeCount
description:i:gui.actions.antiNukeCount.description
displayType: none
buildSpeed: 0s
pos: 0.1
displayRemainingStockpile: true
highPriorityQueue: true
isActive:false
isVisible: if game.nukesEnabled()





[graphics]
total_frames: 1
teamColorsOnTurret: true
image:        body.png
image_wreak: ruin.png
image_turret: NONE



movementEffect: CUSTOM:thrust
movementEffectRate: 1

image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

maxAttackRange: 265
shootDelay: 40

turretRotateWithBody: true
turretMultiTargeting: true


[turret_nanoTurret]
#right arm
x: 0
y: 4
warmup:30

turnSpeed: 5
size: 8


canShoot: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

isMainNanoTurret: true


[turret_1]
x: 0
y: 0
canShoot: false

invisible: true

laserDefenceEnergyUse: 0.4
limitingRange: 80
size:1



[turret_2]
invisible: true
x: -7
y: 7

projectile: 1
size: 1
turnSpeed: 5
delay: 50
warmup: 0

canShoot: true

shoot_sound:plasma_fire
shoot_sound_vol:0.2
shoot_flame:small
#shoot_light:#FFff0000
canAttackFlyingUnits: true
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

[turret_3]
invisible: true
x: 7
y: 7

projectile: 1
size: 1
turnSpeed: 5
linkDelayWithTurret: 2
warmup: 10

canShoot: true

shoot_sound:plasma_fire
shoot_sound_vol:0.2
shoot_flame:small
#shoot_light:#FFff0000
canAttackFlyingUnits: true
canAttackLandUnits:   false
canAttackUnderwaterUnits: false


[turret_4]
invisible: true
x: -7
y: -7

projectile: 1
size: 1
turnSpeed: 5
linkDelayWithTurret: 2
warmup: 25

canShoot: true

shoot_sound:plasma_fire
shoot_sound_vol:0.2
shoot_flame:small
#shoot_light:#FFff0000
canAttackFlyingUnits: true
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

[turret_5]
invisible: true
x: 7
y: -7

projectile: 1
size: 1
turnSpeed: 5
linkDelayWithTurret: 2
warmup: 35

canShoot: true

shoot_sound:plasma_fire
shoot_sound_vol:0.2
shoot_flame:small
#shoot_light:#FFff0000
canAttackFlyingUnits: true
canAttackLandUnits:   false
canAttackUnderwaterUnits: false




[turret_6]
invisible: true
x: -7
y: 7

projectile: 1
size: 1
turnSpeed: 5
delay: 80
warmup: 0

canShoot: true

shoot_sound:plasma_fire
shoot_sound_vol:0.2
shoot_flame:small
#shoot_light:#FFff0000
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
limitingRange: 120

[turret_7]
invisible: true
x: 7
y: 7

projectile: 1
size: 1
turnSpeed: 5
linkDelayWithTurret: 6
warmup: 15

canShoot: true

shoot_sound:plasma_fire
shoot_sound_vol:0.2
shoot_flame:small
#shoot_light:#FFff0000
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
limitingRange: 120


[turret_8]
invisible: true
x: -7
y: -7

projectile: 1
size: 1
turnSpeed: 5
linkDelayWithTurret: 6
warmup: 30

canShoot: true

shoot_sound:plasma_fire
shoot_sound_vol:0.2
shoot_flame:small
#shoot_light:#FFff0000
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
limitingRange: 120


[turret_9]
invisible: true
x: 7
y: -7

projectile: 1
size: 1
turnSpeed: 5
linkDelayWithTurret: 6
warmup: 45

canShoot: true

shoot_sound:plasma_fire
shoot_sound_vol:0.2
shoot_flame:small
#shoot_light:#FFff0000
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

limitingRange: 120




[projectile_1]
directDamage: 35
life: 10

largeHitEffect: true

instant:true

laserEffect:true

instantReuseLast:true

color:#6fff0000

#explodeEffect: CUSTOM:lightSlowFade

shieldDamageMultiplier: 0.5




[effect_thrust]
image: thrust.png
life: 20
fadeOut: true
attachedToUnit: false
fadeInTime:1
drawUnderUnits:true
ySpeedRelative:-0.4
atmospheric: true




[turret_silo]
#anti-nuke turret
x: 0
y: 0
idleDir:0

invisible: true
canShoot: false

interceptProjectiles_withTags: nuke
interceptProjectiles_andTargetingGroundUnderDistance: 700
interceptProjectiles_andUnderDistance: 1000
interceptProjectiles_andOverHeight:50


shoot_sound:nuke_launch
shoot_sound_vol:0.15
shoot_light:#FFEECCCC

projectile: antiNukeProjectile
size: 1

turnSpeed: 40

resourceUsage: ammo=1

shoot_flame:shockwave, smoke
#shoot_flame:custom:nukeLaunch



[projectile_antiNukeProjectile]
#anti-nuke
directDamage: 600

life: 99999
speed: 0.2
targetSpeed: 7
targetSpeedAcceleration:0.05

trailEffect: true
largeHitEffect: true
ballistic: true
ballistic_delaymove_height:80
ballistic_height: 110
frame: 10
#shadowFrame:1

drawType:0

targetGround: true
areaDamage: 100
areaRadius: 60

areaExpandTime:75

deflectionPower:-1


lightColor: #FFEEEE00
lightSize: 1

alwaysVisibleInFog: true


[movement]
movementType: AIR
moveSpeed: 2
moveAccelerationSpeed: 0.05
moveDecelerationSpeed: 0.05

maxTurnSpeed: 1.5
turnAcceleration: 0.1

targetHeight: 70
targetHeightDrift: 1

moveSlidingMode :true
moveIgnoringBody:false
moveSlidingDir: 0
reverseSpeedPercentage:0.5

slowDeathFall: true




[ai]
useAsBuilder: true



