
[core]
name: Krovnork Bunker
displayText: Krovnork Cloning Bunker
displayDescription: -An engineer's bunker for cloning and raising a Krovnork army. 
class: CustomUnitMetadata
price: 1000
maxHp: 700
mass: 9000



copyFrom: ROOT:Building_AI_Base.ini
#borrowResourcesWhileAlive: AA=-1, AG=-1
tags: Building, Factory, NoCap


#footprint used for collisions with units (left, up, right, down)
footprint: -1,-1,2,2
#used for placement, and placement of other buildings
constructionFootprint: -1, -1, 2, 2

buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:0


techLevel: 1



disableAllUnitCollisions: true




buildSpeed: 0.001
#availableInDemo: true

radius: 45
#displayRadius: 80
isBio: false
isBuilding: true


exit_x: -5
exit_y: 10

softCollisionOnAll: 3

#builtFrom_1_name: landFactory
#builtFrom_1_pos:  5



[action_upgrade_1]
convertTo: Krovnork Bunker T2
price:  4000
text: Fortify Bunker
description: -Can produce advanced units. \n-Increased health. \n-Adds a defensive turret.
displayType: Upgrade
buildSpeed: 60s
pos: 0
iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF
descriptionAddUnitStats: ${section.convertTo}

alsoTriggerAction: upStat, upStat_UpdateAlly

[hiddenAction_upStat]
@copyFromSection: hiddenAction_Started
takeResources: EAG=-2, EAA=-2, EAntiArmour=-1, ETurret=-2
[hiddenAction_upStat_UpdateAlly]
@copyFromSection: hiddenAction_Started
takeResources_includeUnitsWithinRange_team: allyNotOwn
takeResources: AntiArmour=0



[hiddenAction_Started]
takeResources: TotalUnit=0
[hiddenAction_Started_UpdateAlly]
takeResources: TotalUnit=0
[hiddenAction_Killed]
takeResources: TotalUnit=0
[hiddenAction_Killed_UpdateAlly]
takeResources: TotalUnit=0
#TotalUnit=-1



[canBuild_rally]
name: setRally
pos: -1
#isLocked: false
#isLockedMessage: NONE
#isGuiBlinking: if not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000)


[canBuild_Builder]
name: Krovnork Builder
pos: 1


[canBuild_Dwarf]
name: dwarfnork
pos: 2
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) and self.hasUnitInTeam(withTag='Unit', greaterThan=5)

[canBuild_Kwogmaks]
name: Kwogmak1
pos: 4
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) and self.hasUnitInTeam(withTag='Unit', greaterThan=5) or self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_AntiLD', greaterThan=0)

[canBuild_Krimks]
name: krimk
pos: 5
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Air', greaterThan=0) and self.hasUnitInTeam(withTag='Unit', greaterThan=5) or self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_AntiLD', greaterThan=0) and not self.hasUnitInTeam(withTag='Q_AA', greaterThan=0)

[canBuild_Gunner]
name: Krovnork Gunner
pos: 6
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) and self.hasUnitInTeam(withTag='Unit', greaterThan=5) or self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_AG', greaterThan=0)


[canBuild_Arty]
name: Krovnork Artillary
pos: 7
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) and self.hasUnitInTeam(withTag='Unit', greaterThan=5) or self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Range', greaterThan=0) and not self.hasUnitInTeam(withTag='Q_AA', greaterThan=0)



[hiddenAction_FinishBuild]
buildSpeed: 0.1s
addResources: unsetFlag=1




[hiddenAction_builder1]
autoTrigger: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='builder', greaterThan=0, withinRange=800) and not self.hasUnitInTeam(withTag='builder', greaterThan=20) and self.hasResources(credits=4000) and not self.hasFlag(id=1) or self.isControlledByAI() and self.numberOfUnitsInTeam(withTag='NeedFix', withinRange=500) > self.numberOfUnitsInTeam(withTag='builder', withinRange=600) and self.hasResources(credits=10000) and not self.hasResources(credits=30000) and not self.hasUnitInTeam(withTag='builder', greaterThan=50) and not self.hasFlag(id=1)
alsoQueueAction: builder2
addResources: setFlag=1, credits=-1200

[hiddenAction_builder2]
buildSpeed: 8s
#addResources: credits=-5200
alsoQueueAction: FinishBuild
spawnUnits: Krovnork Builder








[hiddenAction_QuotaAA]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='Q_AA', greaterThan=0) and self.hasResources(credits=15000) and not self.hasFlag(id=1) and self.hasUnitInTeam(withTag='Q_Air', greaterThan=0)
alsoQueueAction: QuotaAA2
addResources: setFlag=1, credits=-220

[hiddenAction_QuotaAA2]
buildSpeed: 0.005
alsoQueueAction: FinishBuild
spawnUnits: krimk



[graphics]
total_frames: 4

image:        Krovnork Bunker.png
image_back: Krovnork Bunker floor.png
image_wreak:  NONE

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1


animation_idle_start: 0
animation_idle_end: 3
animation_idle_speed: 15


[attack]
canAttack: false
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3


maxAttackRange: 250
shootDelay: 100





[projectile_1]
directDamage: 100
life: 200
speed: 25

laserEffect: true


lightSize: 2
drawSize: 0.3

#ballistic: true
#ballistic_delaymove_height: 10
#ballistic_height: 50


instant:false
largeHitEffect: false

deflectionPower: 3




[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1



[ai]

buildPriority: 0.3

noneInBaseExtraPriority: 0.34
noneGlobalExtraPriority: 0.17


ai_upgradePriority: 0.1




