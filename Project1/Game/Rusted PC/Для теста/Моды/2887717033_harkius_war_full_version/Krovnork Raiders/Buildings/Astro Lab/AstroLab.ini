
[core]
name: K_Asteroid
displayText: Astro-Lab
displayDescription: -Advanced communications relay for tactical deployments. \n-Drains credits to remain active. \n-Can store and launch units to any location. \n-Can Co-ordinate deployment of a Meteor Rain (Pretty much a ton of mini-nukes at once)   
class: CustomUnitMetadata
price: 55000
maxHp: 9000
mass: 9000

generation_credits: -50
generation_delay: 40

copyFrom: ROOT:Building_AI_Base.ini
tags: ReloadingNukes, Building, NukeLauncher, KDropper

isLockedIfGameModeNoNuke:true

#footprint used for collisions with units (left, up, right, down)
footprint: -1,-1,2,2
#used for placement, and placement of other buildings
constructionFootprint: -1, -1, 2, 2

buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:0
fogOfWarSightRange: 45




disableAllUnitCollisions: true





maxTransportingUnits: 28



techLevel: 2
buildSpeed: 0.00006
#availableInDemo: true

radius: 50
#displayRadius: 80
isBio: false
isBuilding: true

softCollisionOnAll: 3

#builtFrom_1_name: landFactory
#builtFrom_1_pos:  5




exit_x:0
exit_y:-1



[action_buildNuke]
price:  28000
text: Prepare Meteors.
description: Load a bunch of big rocks onto a massive rocket. Or just get ready to knock the ruins of a ship out of orbit. 
displayType: NONE
buildSpeed: 55s
pos: 0.2
isActive: if self.ammoIncludingQueued(lessThan=2)
addResources: ammo=1









[action_launchNuke]
fireTurretXAtGround: 1
price:  ammo=1

text: Meteor Rain
description: Never underestimate the power behind a rock dropped from orbit. \n-Especially when that rock is fired out of a gun the size of a skyscraper. 
displayType: action
buildSpeed: 0.5s
pos: 0.3
displayRemainingStockpile: true
highPriorityQueue: true
onlyOneUnitAtATime: true
#playSoundGlobally:drop warning.ogg
#spawnEffects: CUSTOM:shoot
isLocked: if self.isControlledByAI()







[action_launch]
price:  6000
fireTurretXAtGround: 2
fireTurretXAtGround_onlyOverPassableTileOf: LAND
text: Tactical Drop
description: -Tactically deploy all of the contained forces to any land area. \n-Can be intercepted by anti-nukes. 
displayType: action
buildSpeed: 2s
#Only start launching if the unit launcher is full and isn't already launching. (ammo is set to 19 once the first pod is launched)
isActive: if self.transportingCount(greaterThan=0) 
#and self.ammoIncludingQueued(empty=true)


#alsoQueueAction: launch2

#addResources: ammo=17
isLocked: if self.isControlledByAI()
addActionCooldownTime: 30s
onlyOneUnitAtATime: true




[action_launch2]

isVisible: false

fireTurretXAtGround: 2
fireTurretXAtGround_onlyOverPassableTileOf: LAND
text: Launch Unit
description: -Launch a contained unit to target location
displayType: action
buildSpeed: 0.4s
isActive: if not self.transportingCount(empty=true)
alsoQueueAction: launch2
alsoTriggerOrQueueActionConditional: if not self.transportingCount(empty=true) and not self.ammoIncludingQueued(empty=true)
#fired a pod
addResources: ammo=-1 
isLocked: if self.isControlledByAI()








[hiddenAction_attack1]
autoTrigger: if self.isControlledByAI() and not self.hasActiveWaypoint(type='attack')
clearAllWaypoints: true
#addWaypoint_prepend: true
addWaypoint_type: attack
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_tagged: Safety

[hiddenAction_attack2]
autoTrigger: if self.isControlledByAI() and numberOfUnitsInEnemyTeam(withTag='Titan', greaterThan=0)
clearAllWaypoints: true
#addWaypoint_prepend: true
addWaypoint_type: attack
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_tagged: Titan




[hiddenAction_FullAmmo]
autoTrigger: if self.hasResources(ammo=2)
addResources: setFlag=3

[hiddenAction_EmptyAmmo]
autoTrigger: if not self.hasResources(ammo=1)
addResources: unsetFlag=3





[graphics]
total_frames: 1

image:        Launcher.png
image_back: NONE
image_wreak:  NONE

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1




[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
maxAttackRange: 200000
turretMultiTargeting: true


[turret_1]
#nuke turret
canShoot: false

x: 0
y: 25
idleDir:0

invisible: true

shoot_sound:NONE
shoot_sound_vol:0.5
shoot_light:#FFEECCCC

projectile: 1
size: 1

turnSpeed: 40



limitingMinRange: 500


[turret_2]
#Defender drop
canShoot: false

x: 0
y: 25
idleDir:0

invisible: true

shoot_sound:NONE
shoot_sound_vol:0.5
shoot_light:#FFEECCCC

projectile: 2
size: 1

turnSpeed: 40

#limitingMinRange: 200






[turret_AIDrop]
#nuke turret
canShoot: true

x: 0
y: 25
idleDir:0

invisible: true

shoot_sound:NONE
shoot_sound_vol:0.5
shoot_light:#FFEECCCC

projectile: 2
size: 1

turnSpeed: 40

warmup: 30s
#warmupCallDownRate: 60
delay: 10s


#limitingMinRange: 1000
canAttackCondition: if self.isControlledByAI() and not self.transportingCount(empty=true) and self.hasResources(credits=12000)
resourceUsage: credits=6000
canOnlyAttackUnitsWithTags: Safety, Titans




[turret_AINuke]
#nuke turret
canShoot: true

x: 0
y: 25
idleDir:0

invisible: true

shoot_sound:NONE
shoot_sound_vol:0.5
shoot_light:#FFEECCCC

projectile: 1
size: 1

turnSpeed: 40

warmup: 5s
#warmupCallDownRate: 60
delay: 5s


limitingMinRange: 500
canAttackCondition: if self.isControlledByAI() and self.hasResources(ammo=1) and self.hasFlag(id=3)
resourceUsage: ammo=1
canOnlyAttackUnitsWithTags: Safety, Titan







[projectile_1]
life:5
instant: true
directDamage:0
#spawnUnit: K_Ast
spawnUnit: K_Meteor(offsetHeight=1000)
deflectionPower:-1


[projectile_2]
life:99999
instant: false
speed: 1.2
targetSpeed: 5.7
targetSpeedAcceleration: 0.05
targetGround: true
areaDamage: 80
areaRadius: 50
buildingDamageMultiplier: 15
explodeOnEndOfLife: true

directDamage:100
#spawnUnit: Krovnork Veteran Defender, Krovnork Skilled Defender, Krovnork Skilled Gunner, Krovnork Gunner*4

unloadUpToXUnitsFromSource: 28
shouldRevealFog:true
nukeWeapon:true
tags: nuke



largeHitEffect: true
ballistic: true
ballistic_delaymove_height:150
ballistic_height: 300
image: rocket.png
targetGround: true
deflectionPower:-1

mutator1_ifUnitWithTags: orbital
mutator1_directDamageMultiplier: 0
mutator1_areaDamageMultiplier: 0



[projectile_3]
life:99999
instant: false
speed: 0.2
targetSpeed: 9
targetSpeedAcceleration: 0.2

directDamage:100
spawnUnit: Krovnork Veteran Artillary, Krovnork Skilled Artillary, Krovnork Skilled Gunner, Krovnork Gunner*4

largeHitEffect: true
ballistic: true
ballistic_delaymove_height:400
ballistic_height: 600
image: rocket.png
targetGround: true
deflectionPower:-1


[projectile_4]
life:99999
instant: false
speed: 0.5
targetSpeed: 10
targetSpeedAcceleration: 0.2

directDamage:100
spawnUnit: Krovnork Veteran Gunner, Krovnork Skilled Defender, Krovnork Skilled Gunner, Krovnork Gunner*4

largeHitEffect: true
ballistic: true
ballistic_delaymove_height:400
ballistic_height: 600
image: rocket.png
targetGround: true
deflectionPower:-1


[projectile_5]
life:99999
instant: false
speed: 1
targetSpeed: 15
targetSpeedAcceleration: 0.3

directDamage:100
spawnUnit: Krovnork Veteran Elite

largeHitEffect: true
ballistic: true
ballistic_delaymove_height:400
ballistic_height: 600
image: rocket.png
targetGround: true
deflectionPower:-1


[projectile_6]
life:99999
instant: false
speed: 0.2
targetSpeed: 9
targetSpeedAcceleration: 0.2

directDamage:100
spawnUnit: Krovnork Veteran Chemist, Krovnork Skilled Artillary*2, Krovnork Gunner*4

largeHitEffect: true
ballistic: true
ballistic_delaymove_height:400
ballistic_height: 600
image: rocket.png
targetGround: true
deflectionPower:-1

[projectile_7]
life:99999
instant: false
speed: 0.2
targetSpeed: 9
targetSpeedAcceleration: 0.2

directDamage:100
spawnUnit:  MP tank armed, Krovnork Skilled Artillary*2

largeHitEffect: true
ballistic: true
ballistic_delaymove_height:400
ballistic_height: 600
image: rocket.png
targetGround: true
deflectionPower:-1




[projectile_8]
life:99999
instant: false
speed: 0.2
targetSpeed: 9
targetSpeedAcceleration: 0.2

directDamage:100
spawnUnit:  Amalgamate, Krovnork Veteran Defender*2, Krovnork Veteran Gunner*2

largeHitEffect: true
ballistic: true
ballistic_delaymove_height:400
ballistic_height: 600
image: rocket.png
targetGround: true
deflectionPower:-1





[projectile_nukeProjectile]
#nuke
tags: nuke

directDamage: 1

life: 99999
speed: 1.2
targetSpeed: 5
targetSpeedAcceleration:0.03


largeHitEffect: true
ballistic: true
ballistic_delaymove_height:900
ballistic_height: 1000

#image: Orb blast.png
drawType:2
frame: 7
trailEffect: false

targetGround: true
areaDamage: 3500
areaHitAirAndLandAtSameTime: true
alwaysVisibleInFog: true

areaRadius: 300

areaExpandTime:90

deflectionPower:-1


shouldRevealFog:true
nukeWeapon:true


friendlyFire: true


[effect_shoot]
life: 200


hOffset: 25
hSpeed: 10
dirOffset: 0

fadeInTime: 0
fadeOut: false


attachedToUnit: true


image: rocket.png
scaleFrom: 1
scaleTo: 1


[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1



[ai]

buildPriority: 0.1

noneGlobalExtraPriority: 0.2

maxGlobal: 3

ai_upgradePriority: 0.3


#disableUse: true
