[core]
name: K_LaserDefence
displayText: Shield Shroom
displayDescription: -Intercetprs projectiles with a laser defence. \n-Needs time to recharge energy. \n-Can only be built near extractor drills.  
class: CustomUnitMetadata
price: 5000
maxHp: 2000
mass: 9000


copyFrom: ROOT:Building_AI_Base.ini
borrowResourcesWhileAlive: LD=-2
tags: Building, LD3, Shield2



#footprint used for collisions with units (left, up, right, down)
footprint: 0,0,1,1
#used for placement, and placement of other buildings
constructionFootprint:0,0,1,1

buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:20



techLevel: 1
buildSpeed: 40s
#availableInDemo: true




disableAllUnitCollisions: true




radius: 15
#displayRadius: 80
isBio: false
isBuilding: true


energyMax: 10
energyRegen: 0.015
energyNeedsToRechargeToFull: true


maxShield: 800
shieldRegen: 0.5

armour: 5


softCollisionOnAll: 3


#builtFrom_1_name: landFactory
#builtFrom_1_pos:  5


[hiddenAction_Started]
takeResources: ETurret=-1, ELD=-3
[hiddenAction_Started_UpdateAlly]
takeResources: LD=-1
[hiddenAction_Killed]
takeResources: ETurret=1, ELD=3
[hiddenAction_Killed_UpdateAlly]
takeResources: LD=1
#TotalUnit=-1






[hiddenAction_drained]
autoTrigger: if self.energy(lessThan=1)
temporarilyAddTags: drained


[hiddenAction_restored]
autoTrigger: if self.energy(greaterThan=9)
resetToDefaultTags: true



[hiddenAction_refund]
autoTrigger: if not self.hasUnitInTeam(withTag='drill', greaterThan=0, withinRange=360)
#autoTriggerOnEvent: created
addResources: 3000

#fireTurretXAtGround: explode
#fireTurretXAtGround_withOffset: 0,0

deleteSelf: true
showMessageToPlayer: Shield Shrooms cannot operate without a nearby extractor drill.




[placementRule_1]
searchTags: drill
searchDistance: 360
cannotPlaceMessage: must be placed near a drill.
minCount: 1



[graphics]
total_frames: 1

image:        T1On.png
image_back: NONE
image_wreak:  turret_base_dead.png

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1




[attack]
canAttack: false

turretSize: 20
turretTurnSpeed: 3


maxAttackRange: 350
shootDelay: 100
turretMultiTargeting: true


[turret_1]
x: 0
y: 7
canShoot: false

invisible: true

laserDefenceEnergyUse: 1
size:1
#limitingRange: 150






[arm_1]
x: 0
y: 0
image_end: T1Off.png
image_end_teamColors: true
drawOverBody: true
hidden: if not self.tags(includes='drained')
#if not self.isEnergyEmpty()





[movement]
movementType: LAND
#OVER_CLIFF
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1



[ai]


buildPriority: 0.3
noneInBaseExtraPriority: 0.3




maxEachBase: 2
#maxGlobal: 13
