
[core]
name: Amalgamate
displayText: Amalgamate
displayDescription: A bio-engineered terror. Grown by moulding huge fields of flesh into Krovnork form. \n-Ultimate melee strength.\n-Very heavily armoured. \n-Without the armour, it can make a quick getaway.\n-Can traverse rough terrain. Cannot swim.\n-Regenerates rapidly.
class: CustomUnitMetadata

price: 70000
maxHp: 5500
mass: 200000

copyFrom: ROOT:Unit_AI_Base.ini
borrowResourcesWhileAlive: TotalUnit=-1, Ground=-5, Cliff=-5, AG=-3, AntiLD=-1, Armour=-1, AntiArmour=-3
tags: Unit, Ground2, Cliff2, AG2, ALD, CanLead2, Armour, AntiArmour2

techLevel: 2
experimental: true

buildSpeed: 85s

generation_credits: -70
generation_delay: 40

radius: 25
displayRadius: 30


armour: 8
armourMinDamageToKeep: 0

transportSlotsNeeded: 15



isBio: true
selfRegenRate:0.8



[hiddenAction_Started]
takeResources: EGround=-5, ECliff=-5, EAG=-9, EAntiArmour=-3, EArmour=-1, EAntiLD=-1
[hiddenAction_Started_UpdateAlly]
takeResources: Ground=-5, Cliff=-5, AG=-9, AntiArmour=-3, Armour=-1, AntiLD=-1
[hiddenAction_Killed]
takeResources: EGround=5, ECliff=5, EAG=9, EAntiArmour=3, EArmour=1, EAntiLD=1
[hiddenAction_Killed_UpdateAlly]
takeResources: Ground=5, Cliff=5, AG=9, AntiArmour=3, Armour=1, AntiLD=1
#TotalUnit=-1



[hiddenAction_TriggerSwitch]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='Safety', greaterThan=0, withinRange=150) and not numberOfUnitsInEnemyTeam(withTag='Unit', greaterThan=1, withinRange=500) and self.hasResources(credits=60000)
alsoQueueAction: GearUp



[action_GearUp]
convertTo: ArmouredAmalgamate
displayType: action
text: Replace Armour
description: -Equips life saving armour. \n-More durability. \n-Light Anti-air attack. \n-Slower movement. \n-loses armour instead of dying.
buildSpeed: 45s
price: 25000
whenBuilding_cannotMove: true
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Safety', greaterThan=0, withinRange=150)
descriptionAddUnitStats: ${section.convertTo}
takeResources: EGround=-7, ECliff=-7, EAG=-3, EAA=-3, EAntiArmour=-6, EAntiLD=-4, EArmour=-11
takeResources_includeUnitsWithinRange: 99999
takeResources_includeUnitsWithinRange_team: enemy
takeResources_excludeUnitsWithoutTags: aiMaster
takeResources_maxUnits: 10
takeResources_discardCollected: true
alsoTriggerAction: GearUp2

[hiddenAction_GearUp2]
takeResources: Ground=-4, Cliff=-4, AG=-3, AA=-3, AntiArmour=-6, AntiLD=-4, Armour=-11
takeResources_includeUnitsWithinRange: 99999
takeResources_includeUnitsWithinRange_team: allyNotOwn
takeResources_excludeUnitsWithoutTags: aiMaster
takeResources_maxUnits: 10
takeResources_discardCollected: true




[hiddenAction_Healed]
autoTrigger: if self.isControlledByAI() and self.hp(greaterThan=5450)
temporarilyRemoveTags: Retreat

[hiddenAction_Damaged]
autoTrigger: if self.isControlledByAI() and self.hp(lessThan=5400)
temporarilyAddTags: Retreat


[hiddenAction_autoWithdraw]
autoTriggerOnEvent: completeAndActive
clearAllWaypoints: true
addWaypoint_prepend: true
addWaypoint_type: move
addWaypoint_target_nearestUnit_maxRange: 99999
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_tagged: Repair
temporarilyAddTags: Retreat




[graphics]
total_frames: 1
teamColorsOnTurret: true
image:        a waist.png
image_wreak: NONE
image_turret: a body.png


image_shadow: SHADOW:a body.png
lock_shadow_rotation_with_main_turret: true
shadowOffsetX:2
shadowOffsetY:2

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 10
turretTurnSpeed: 3
maxAttackRange: 20
shootDelay: 35
aimOffsetSpread:0.2
turretRotateWithBody: true
isMelee: true

turretMultiTargeting: true


[turret_1]
#right melee arm

x: 18
y: 0
turnSpeed: 3
attachedTo: 3
canShoot: true
shoot_flame:NONE
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
projectile: 1
recoilOffset: 10
recoilOutTime: 10
recoilReturnTime: 25
delay: 60
image: a right arm.png
warmup: 0


[turret_2]

#shield

x: -18
y: 0
turnSpeed: 3
attachedTo: 3
canShoot: true
shoot_flame:NONE
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
projectile: 1
recoilOffset: 10
recoilOutTime: 10
recoilReturnTime: 25
linkDelayWithTurret: 1
image: a left arm.png
warmup: 20


[turret_3]

#body

x: 0
y: 0
turnSpeed: 2
size: 20
canShoot: false
idleDir:0


[turret_4]
#head

x: 0
y: 0
idleDir:0
invisible: false
canShoot: true
turnSpeed: 2.2
idleDir:0
attachedTo: 3

canShoot: true
shoot_flame:NONE
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
projectile: 2
recoilOffset: 5
recoilOutTime: 10
recoilReturnTime: 20
delay: 35
image: a head.png
warmup: 40




[projectile_1]
#Megaton POUNCH
directDamage: 400
instant: true
laserEffect: false
life: 5
largeHitEffect: true
areaRadius: 20
areaDamage: 0

[projectile_2]

#the maw

directDamage: 550
instant: true
laserEffect: false
life: 5
largeHitEffect: true







[leg_1]
x: -12
y: 0
attach_x: -10
attach_y: 0
moveSpeed: 2.6

rotateSpeed: 4

heightSpeed: 0.5
resetAngle:25

image_leg:  a left leg.png
image_foot: a foot.png

#draw_foot_on_top: false
#dust_effect: false

holdDisMin: 15
holdDisMax: 25

[leg_2]
x: 12
y: 0
attach_x: 10
attach_y: 0
copyFrom: 1
image_leg:  a left leg.png


[movement]
movementType: OVER_CLIFF
moveSpeed: 1.0
moveAccelerationSpeed: 0.09
moveDecelerationSpeed: 0.2

maxTurnSpeed: 1.5
turnAcceleration: 0.15
targetHeight:0.5
moveSlidingMode :false
moveIgnoringBody:true
moveSlidingDir: 0
reverseSpeedPercentage:1

slowDeathFall: false

[ai]

