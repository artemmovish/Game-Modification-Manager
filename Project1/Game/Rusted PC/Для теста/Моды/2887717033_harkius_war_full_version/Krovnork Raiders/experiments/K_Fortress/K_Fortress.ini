
[core]
name: Krovfort
displayText: Fortress walker
displayDescription: A huge, heavily armoured gunning platform. \n Very slow. \n-Can attack orbital units. \n-Long range railgun and missiles. \n-Easily overwelmed at close range. \n-Has a limited laser defence. \n-Can build anti-nukes.
class: CustomUnitMetadata

price: 58000
maxHp: 5500
mass: 250000

techLevel: 2
experimental: true

buildSpeed: 85s

copyFrom: ROOT:Unit_AI_Base.ini
borrowResourcesWhileAlive: TotalUnit=-1, Ground=-9, Cliff=-9, AG=-9, AA=1, Artillery=-9, AntiArmour=-9, LD=-3, AO=-4
tags: Unit, Ground3, Cliff3, AG3, AA, AO2, anti-orbital, Range3, CanLead3, AntiArmour3, antinuke, LD2

fogOfWarSightRange: 40
generation_credits: -50
generation_delay: 40

radius: 70
displayRadius: 35

energyMax: 5
energyRegen: 0.0027
energyNeedsToRechargeToFull: true
transportSlotsNeeded: 15


isBio: false



[hiddenAction_Started]
takeResources: EGround=-9, ECliff=-9, EAG=-9, EAA=1, EArtillery=-9, EAntiArmour=-9, ELD=-3, EAO=-4
[hiddenAction_Started_UpdateAlly]
takeResources: Ground=-9, Cliff=-9, AG=-9, AA=1, Artillery=-9, AntiArmour=-9, LD=-3, AO=-4
[hiddenAction_Killed]
takeResources: EGround=9, ECliff=9, EAG=9, EAA=-1, EArtillery=9, EAntiArmour=9, ELD=3, EAO=4
[hiddenAction_Killed_UpdateAlly]
takeResources: Ground=9, Cliff=9, AG=9, AA=-1, Artillery=9, AntiArmour=9, LD=3, AO=4
#TotalUnit=-1





[hiddenAction_Healed]
autoTrigger: if self.isControlledByAI() and self.hp(greaterThan=5000)
temporarilyRemoveTags: Retreat

[hiddenAction_Damaged]
autoTrigger: if self.isControlledByAI() and self.hp(lessThan=4000)
temporarilyAddTags: Retreat




[hiddenAction_LoadUp]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='KDropper', greaterThan=0, withinRange=1000) and not self.hasActiveWaypoint(type='loadInto') and not self.NumberOfUnitsInTeam(withTag='ALL_ATTACK', greaterThan=0) and not self.tags(includes='Retreat') and not self.tags(includes='DEFEND') and not self.tags(includes='Attacking')
addWaypoint_type: loadInto
clearAllWaypoints: false
addWaypoint_prepend: true
addWaypoint_target_nearestUnit_maxRange: 1000
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_tagged: KDropper








[action_buildAntiNuke]
price:  5000
text: i:gui.actions.buildAntiNuke
description: Builds anti-nuke interceptor missiles. \n-Max of 3 in storage. 
displayType: NONE
buildSpeed: 26s
pos: 0.2
isActive:if self.ammoIncludingQueued(lessThan=3)
addResources: ammo=1
isLocked: if not game.nukesEnabled()
ai_isDisabled: if self.ammo(greaterThan=3)



[action_showAntiNukeCount]
#infoOnly: true
addResources: ammo=1
price:  ammo=1
text: i:gui.actions.antiNukeCount
description:i:gui.actions.antiNukeCount.description
displayType: none
buildSpeed: 0s
pos: 0.1
displayRemainingStockpile: true
highPriorityQueue: true
isActive:false
isVisible: if game.nukesEnabled()







[graphics]
total_frames: 1
teamColorsOnTurret: true
image:       fort base.png
image_wreak: fort ruin.png
image_turret: fort body.png


image_shadow: SHADOW:fort body.png
lock_shadow_rotation_with_main_turret: false
shadowOffsetX:0.5
shadowOffsetY:0.5

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 10
turretTurnSpeed: 1.1
maxAttackRange: 550
shootDelay: 100
aimOffsetSpread:0.5
turretRotateWithBody: true
turretMultiTargeting: true


[turret_1]

#missiles
x: 0
y: 0
invisible: true
projectile: 2
attachedTo: 3
turnSpeed: 10
turnSpeedAcceleration: 2

shoot_sound:missile_fire
shoot_sound_vol:0.7
canShoot: true

canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
limitingRange: 350


shoot_light:#ff0000
warmup: 5
delay: 85


image: NONE

[turret_2]

#railgun

x: 0
y: 10
projectile: 1
attachedTo: 3
slave: true

turnSpeed: 0.4

shoot_sound:cannon_firing
shoot_sound_vol:0.8
shoot_flame:small
shoot_light:#FFEEEEEE

delay: 70
warmup: 50

canShoot: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
canOnlyAttackUnitsWithoutTags: orbital


image: fort gun.png
recoilOffset: -4
recoilOutTime: 5
recoilReturnTime: 20



[turret_3]

#body

x: 0
y: 0
size: 20
canShoot: false
idleDir:0
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
canOnlyAttackUnitsWithoutTags: orbital



[turret_4]

x: 0
y: 0
canShoot: false
invisible: true


laserDefenceEnergyUse: 0.25

limitingRange: 125


[turret_5]

#missiles
x: 0
y: 0
invisible: true
projectile: 3
attachedTo: 3
turnSpeed: 10
turnSpeedAcceleration: 2

shoot_sound:missile_fire
shoot_sound_vol:0.7
canShoot: true

canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
limitingRange: 500
canOnlyAttackUnitsWithTags: orbital


shoot_light:#ff0000
warmup: 60
delay: 50



[projectile_1]

#railgun
speed: 13
drawSize: 1.55
drawType:2
frame: 4
color: #BB99DD
directDamage: 450
instant:false
laserEffect: false
life: 120
trailEffect: true

largeHitEffect: true
areaDamage: 100
areaRadius: 80
deflectionPower: 4
#initialUnguidedSpeedHeight: 1.2
#gravity:0.18
#lightCastOnGround: true
pushForce: 20000




[projectile_2]
#missile
directDamage: 75
drawSize: 0.8
life: 600
speed: 0.3
targetSpeed: 6
trailEffect: true
largeHitEffect: true
ballistic: true
ballistic_delaymove_height:40
ballistic_height: 50
frame: 4

areaDamage: 80
areaRadius: 55

autoTargetingOnDeadTarget: true
armourIgnoreAmount: 500

[projectile_3]
#missile
directDamage: 550
drawSize: 0.8
life: 600
speed: 3
targetSpeed: 12
trailEffect: true
largeHitEffect: true
ballistic: true
ballistic_delaymove_height:40
ballistic_height: 50
frame: 4

areaDamage: 100
areaRadius: 55

autoTargetingOnDeadTarget: true
armourIgnoreAmount: 500





[turret_silo]
#anti-nuke turret
x: 0
y: 0
idleDir:0

invisible: true
canShoot: false

interceptProjectiles_withTags: nuke
interceptProjectiles_andTargetingGroundUnderDistance: 700
interceptProjectiles_andUnderDistance: 1000
interceptProjectiles_andOverHeight:50


shoot_sound:nuke_launch
shoot_sound_vol:0.15
shoot_light:#FFEECCCC

projectile: antiNukeProjectile
size: 1

turnSpeed: 40

resourceUsage: ammo=1

shoot_flame:shockwave, smoke
#shoot_flame:custom:nukeLaunch



[projectile_antiNukeProjectile]
#anti-nuke
directDamage: 600

life: 99999
speed: 1
targetSpeed: 8
targetSpeedAcceleration:0.05

trailEffect: true
largeHitEffect: true
ballistic: true
ballistic_delaymove_height:80
ballistic_height: 110
frame: 10
#shadowFrame:1

drawType:0

targetGround: true
areaDamage: 100
areaRadius: 60

areaExpandTime:75

deflectionPower:-1


lightColor: #FFEEEE00
lightSize: 1

alwaysVisibleInFog: true





[leg_1]
x: -50
y: 50
attach_x: -10
attach_y: 10
moveSpeed: 1.5

rotateSpeed: 4

heightSpeed: 0.1
resetAngle:25

image_leg:  fort leg.png
image_foot: fort foot.png

#draw_foot_on_top: false
#dust_effect: false

holdDisMin: 1
holdDisMax: 3

[leg_2]
x: 50
y: 50
attach_x: 10
attach_y: 10
copyFrom: 1

[leg_3]
x: -50
y: -30
attach_x: -10
attach_y: -10
copyFrom: 1

[leg_4]
x: 50
y: -30
attach_x: 10
attach_y: -10
copyFrom: 1

[leg_5]
x: 0
y: -75
attach_x: 0
attach_y: -20
copyFrom: 1
holdDisMin: 4
holdDisMax: 6



[movement]
movementType: OVER_CLIFF
moveSpeed: 0.4
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.05

maxTurnSpeed: 0.6
turnAcceleration: 0.05
targetHeight:5
moveSlidingMode :true
moveIgnoringBody:false
moveSlidingDir: 45
reverseSpeedPercentage:0.8

slowDeathFall: true

