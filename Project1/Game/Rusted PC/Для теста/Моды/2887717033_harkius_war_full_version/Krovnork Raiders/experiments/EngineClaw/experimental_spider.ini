[core]
name: K_EngineClaw
class: CustomUnitMetadata
#price: 2
price: 85000

maxHp: 8000
mass: 90000

displayText: Engine Claw
displayDescription: Very Durable. \n-Builds rapidly. \n-Built in credit fabricator. \n-Some laser defence. \n-Hovers over water.\n-Goes nuclear on death (if nukes are enabled) \n-Engine Claws are specially designed to handle Krovnork spaceship reactors. 

isPickableStartingUnit: true
startFallingWhenStartingUnit: true

copyFrom: ROOT:Builder_AI.ini
borrowResourcesWhileAlive: TotalUnit=-1, Ground=-9, Water=-3, AG=-3, AA=-3, Armour=-3, LD=-3, Artillery=-1
tags: Unit, Ground3, Water2, AG2, AA2, Armour2, CanLead1, builder, CanFollow, NoCap, LD2, Range


techLevel: 1
experimental: true

buildSpeed: 0.0002
#buildSpeed: 1

#availableInDemo: true

radius: 25
displayRadius: 25


fogOfWarSightRange:25


transportSlotsNeeded: 12

isBio: false
isBuilder: true



softCollisionOnAll: 3


#nanoFactorySpeed:2.5

generation_credits: 25
generation_delay: 40

selfRegenRate:0.2
armour: 15

#builtFrom_1_name: commandCenter
#builtFrom_1_pos:  2

builtFrom_1_name: experimentalLandFactory
builtFrom_1_pos:  6

energyMax: 1
energyRegen: 0.001


canRepairBuildings: true
canRepairUnits : true


canReclaimResources: true


autoRepair: true


nanoRange: 100


nanoRepairSpeed: 1.5
nanoBuildSpeed: 6
nanoFactorySpeed:1
maxTransportingUnits: 4


nukeOnDeath: true
nukeOnDeathRange: 170
nukeOnDeathDamage: 3200
nukeOnDeathDisableWhenNoNuke: true


[hiddenAction_Started]
takeResources: EGround=-9, EWater=-3, EAG=-3, EAA=-3, EArmour=-3, ELD=-3, EArtillery=-1
[hiddenAction_Started_UpdateAlly]
takeResources: Ground=-9, Water=-3, AG=-3, AA=-3, Armour=-3, LD=-3, Artillery=-1
[hiddenAction_Killed]
takeResources: EGround=9, EWater=3, EAG=3, EAA=3, EArmour=3, ELD=3, EArtillery=1
[hiddenAction_Killed_UpdateAlly]
takeResources: Ground=9, Water=3, AG=3, AA=3, Armour=3, LD=3, Artillery=1
#TotalUnit=-1



[canBuild_units]
name: Krovnork Mechanic, dwarfnork, Aquanork land, Krovnork Gunner, Krovnork Artillary
pos: 10


[canBuild_1]
name: reclaim
pos: -1
#isLocked: false
#isLockedMessage: NONE
#isGuiBlinking: if not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000)

[canBuild_economy]
name: K_DrillT3
pos: 1

[canBuild_NearDrill]
name: K_Refinary2, K_LaserDefence
pos: 2
#isLocked: if not self.hasUnitInTeam(withTag='drill', greaterThan=0, withinRange=400) and self.isControlledByAI()
#isLockedMessage: This building cannot operate without a nearby extractor drill

[canBuild_turrets]
name: K_QuadCannon, K_TwinLaser, K_BeamerTurret, K_RocketTurret
pos: 2



[canBuild_buildings]
name: Krovnork Bunker T2, Krovnork Factory T2, K_seaFactoryT2, K_FleshFarm
pos: 3


[canBuild_antinuke]
name: Krovnork_antiNukeLauncher
pos: 4
isGuiBlinking: if not self.hasUnitInTeam(withTag='antinuke', greaterThan=0, withinRange=1000) and game.nukesEnabled()

[canBuild_nuke]
name: K_Asteroid
pos: 5


[canBuild_antiorbit]
name: Krovnork Launch Pit
pos: 2
isGuiBlinking: if not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000)





[hiddenAction_buildAO]
autoTrigger: if self.isControlledByAI() and self.NumberOfUnitsInTeam(withTag='Q_AO', greaterThan=0) and self.hasResources(credits=35000) and not self.tags(includes='Formation') and not self.tags(includes='Retreat') and not self.tags(includes='Attacking') and not self.tags(includes='DEFEND') and not self.hasActiveWaypoint(type='build')
requireConditional: if self.NumberOfUnitsInTeam(withTag='AOTurret', lessThan=1, withinRange=700) and self.NumberOfUnitsInTeam(withTag='Factory', greaterThan=0, withinRange=250)
addWaypoint_unitType: Krovnork Launch Pit
addResources: credits=-10000




[hiddenAction_unload]
autoTrigger: if self.isControlledByAI() and self.transportingCount(greaterThan=0)
startUnloadingTransport: true
clearAllWaypoints: false



[hiddenAction_Healed]
autoTrigger: if self.isControlledByAI() and self.hp(greaterThan=7000)
temporarilyRemoveTags: Retreat

[hiddenAction_Damaged]
autoTrigger: if self.isControlledByAI() and self.hp(lessThan=6000)
temporarilyAddTags: Retreat






[graphics]
drawLayer: experimentals

total_frames: 1

image:        NBody.png
image_wreak:  body_dead.png
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#teamColorsOnTurret: true

image_shadow: AUTO
shadowOffsetX:3
shadowOffsetY:3

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 1
turretTurnSpeed: 2
maxAttackRange: 450
shootDelay: 2s

turretMultiTargeting: true

[turret_nanoTurret]

x: 0
y: 25

idleDir:0
idleDirReversing: 0

warmup:75

turnSpeed: 4
size: 8

invisible: true

canShoot: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

isMainNanoTurret: true


[turret_laserDefence]
x: 0
y: 18
canShoot: false
invisible: true
laserDefenceEnergyUse: 0.08
limitingRange: 180
size:1



[turret_Missile]

#Cannon

x: -10
y: 0
projectile: 1

invisible: true

shoot_sound: missile_fire
shoot_sound_vol:0.1
shoot_flame: NONE
shoot_light:#FFEECCCC

warmup: 0s

canShoot: true




[turret_Missile2]
#antiair 2
x: 10
y: 0

copyFrom: Missile
linkDelayWithTurret: Missile

warmup: 0.5s



[projectile_1]
#missile
directDamage: 60
life: 190
speed: 2
targetSpeed: 8

areaDamage: 60
areaRadius: 65

color: #fff7ff1d

drawSize: 1.9

trailEffect: true
largeHitEffect: true

ballistic: true
ballistic_delaymove_height:25
ballistic_height: 25

lightColor: #f7ff1d
lightSize: 0.5

#initialUnguidedSpeedHeight: 2.5
#gravity:0.22
lightCastOnGround: false











[movement]
movementType: HOVER
moveSpeed: 1.25
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.07

targetHeight: 5
targetHeightDrift: 1

reverseSpeedPercentage:0.9

maxTurnSpeed: 0.6
turnAcceleration: 0.05

moveSlidingMode :false
moveIgnoringBody:true
moveSlidingDir:  45


slowDeathFall: true





[ai]
useAsBuilder: true





