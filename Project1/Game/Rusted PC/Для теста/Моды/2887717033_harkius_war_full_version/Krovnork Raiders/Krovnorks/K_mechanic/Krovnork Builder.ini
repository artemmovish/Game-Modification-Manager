
[core]
name: Krovnork Builder
displayText: Krovnork Builder
displayDescription: An engineer in training. \n -Can't fight in melee due to delicate equipment. \n-Builds and repairs slowly.\n-Can traverse rough terrain.\n-Slow, but has a some health regen.
class: CustomUnitMetadata

price: 1000
maxHp: 450
mass: 5000

copyFrom: ROOT:Builder_AI.ini
borrowResourcesWhileAlive: TotalUnit=-1, Ground=-1, Cliff=-1
tags: Unit, Ground, Cliff, builder, NoCap, Small



techLevel: 1
experimental: false

buildSpeed: 0.002


radius: 20
displayRadius: 20


transportSlotsNeeded: 2


isBio: true
selfRegenRate:0.05
isBuilder: true



canRepairBuildings: true
canRepairUnits : false


canReclaimResources: true


autoRepair: false


nanoRange: 150


nanoRepairSpeed: 0.15
nanoBuildSpeed: 1


[hiddenAction_Started]
takeResources: EGround=-1, ECliff=-1
[hiddenAction_Started_UpdateAlly]
takeResources: Ground=-1, Cliff=-1
[hiddenAction_Killed]
takeResources: EGround=1, ECliff=1
[hiddenAction_Killed_UpdateAlly]
takeResources: Ground=1, Cliff=1
#TotalUnit=-1


[action_upgrade_1]
convertTo: Krovnork Mechanic
price:  4500
text: Advanced Engineering
description: -Constructs superior buildings. \n-Increases stats. \n-Gains a weak close-range attack.
displayType: Upgrade
buildSpeed: 45s
pos: 0.2
whenBuilding_cannotMove: true
iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF
descriptionAddUnitStats: ${section.convertTo}

alsoTriggerAction: upStat, upStat_UpdateAlly

[hiddenAction_upStat]
@copyFromSection: hiddenAction_Started
takeResources: EAG=-1
[hiddenAction_upStat_UpdateAlly]
@copyFromSection: hiddenAction_Started
takeResources_includeUnitsWithinRange_team: allyNotOwn
takeResources: AG=-1



[canBuild_1]
name: reclaim
pos: -1
#isLocked: false
#isLockedMessage: NONE
#isGuiBlinking: if not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000)

[canBuild_2]
name: K_DrillT1, K_CannonTurret
pos: 1


[canBuild_4]
name: Krovnork Bunker, Krovnork Factory, K_seaFactory
pos: 3
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000) and numberOfUnitsInEnemyTeam(withTag='Obomb', greaterThan=0, withinRange=1000)


[canBuild_5]
name: Krovnork_antiNukeLauncher
pos: 4
isGuiBlinking: if not self.hasUnitInTeam(withTag='antinuke', greaterThan=0, withinRange=1000) and game.nukesEnabled()
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000) and numberOfUnitsInEnemyTeam(withTag='Obomb', greaterThan=0, withinRange=1000)


[canBuild_7]
name: Krovnork Launch Pit
pos: 3.5
isGuiBlinking: if not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000)




[hiddenAction_buildAO]
autoTrigger: if self.isControlledByAI() and self.NumberOfUnitsInTeam(withTag='Q_AO', greaterThan=0) and self.hasResources(credits=35000) and not self.tags(includes='Formation') and not self.tags(includes='Retreat') and not self.tags(includes='Attacking') and not self.tags(includes='DEFEND') and not self.hasActiveWaypoint(type='build')
requireConditional: if self.NumberOfUnitsInTeam(withTag='AOTurret', lessThan=1, withinRange=700) and self.NumberOfUnitsInTeam(withTag='Factory', greaterThan=0, withinRange=250)
addWaypoint_unitType: Krovnork Launch Pit
addResources: credits=-10000


[hiddenAction_Healed]
autoTrigger: if self.isControlledByAI() and self.hp(greaterThan=430)
temporarilyRemoveTags: Retreat

[hiddenAction_Damaged]
autoTrigger: if self.isControlledByAI() and self.hp(lessThan=400)
temporarilyAddTags: Retreat


[graphics]
total_frames: 1
teamColorsOnTurret: true
image:        K engine waist.png
image_wreak: Krovnork corpse.png
image_turret: K builder body.png

animation_idle_scale_start:1
animation_idle_scale_end:1.07
animation_idle_pingPong: true


image_shadow: SHADOW:K engine body.png
lock_shadow_rotation_with_main_turret: true
shadowOffsetX:2
shadowOffsetY:2

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false


[turret_nanoTurret]
#right arm
x: 8
y: 0
warmup:30

turnSpeed: 4
size: 8


canShoot: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

isMainNanoTurret: true

image: K builder rarm.png



[turret_2]

#left melee arm

x: -8
y: 0
turnSpeed: 4
attachedTo: 3
image: K builder larm.png



[turret_3]

#body

x: 0
y: 0
turnSpeed: 3
size: 20
canShoot: false
idleDir:0


[turret_4]
#head

x: 0
y: 0
idleDir:0
invisible: false
idleDir:0
attachedTo: 3
image: K engine head.png





[projectile_1]
#Bam, bam, bam!
speed: 15
drawSize: 0.95
drawType:2
frame: 4
color: #BB99DD
directDamage: 12
instant:false
laserEffect: false
life: 90
trailEffect: true

[projectile_2]

#You punched me! The tanks never punched me!


directDamage: 75
instant: true
laserEffect: false
life: 5
largeHitEffect: true
areaRadius: 20
areaDamage: 0


[projectile_3]

#You punched me! The tanks never punched me!


directDamage: 90
instant: true
laserEffect: false
life: 5
largeHitEffect: true
areaRadius: 10
areaDamage: 0




[leg_1]
x: -5
y: 0
attach_x: -2
attach_y: 0
moveSpeed: 2

rotateSpeed: 4

heightSpeed: 0.35
resetAngle:25

image_leg:  K engine leg.png
image_foot: K engine foot.png

#draw_foot_on_top: false
#dust_effect: false

#holdDisMin: 0.02
#holdDisMax: 0.04

[leg_2]
x: 5
y: 0
attach_x: 2
attach_y: 0
copyFrom: 1


[movement]
movementType: OVER_CLIFF
moveSpeed: 0.7
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.07

maxTurnSpeed: 2.0
turnAcceleration: 0.3
targetHeight:0.5
moveSlidingMode :false
moveIgnoringBody:false
moveSlidingDir: 0
reverseSpeedPercentage:0.8

slowDeathFall: false




[ai]
useAsBuilder: true
ai_upgradePriority: 0.4



