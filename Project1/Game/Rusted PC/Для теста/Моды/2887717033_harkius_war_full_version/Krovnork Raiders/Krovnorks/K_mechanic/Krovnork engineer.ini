
[core]
name: Krovnork Mechanic
displayText: Krovnork Engineer
displayDescription: The brains behind every Krovnork army. \n-Powerful melee attack\n-Powerful building and repair.\n-Can traverse rough terrain.\n-Slow, but has a some health regen.
class: CustomUnitMetadata

price: 5500
maxHp: 1500
mass: 5000

isPickableStartingUnit: false

copyFrom: ROOT:Builder_AI.ini
borrowResourcesWhileAlive: TotalUnit=-1, Ground=-1, Cliff=-1, AG=-1
tags: Unit, Ground, Cliff, AG, NoCap, builder, CanFollow

techLevel: 2
experimental: false

buildSpeed: 30s



radius: 20
displayRadius: 20




transportSlotsNeeded: 2


isBio: true
selfRegenRate:0.2
isBuilder: true



canRepairBuildings: true
canRepairUnits : true


canReclaimResources: true


autoRepair: true


nanoRange: 170


nanoRepairSpeed: 0.3
nanoBuildSpeed: 1.7



[hiddenAction_Started]
takeResources: EGround=-1, ECliff=-1, EAG=-1
[hiddenAction_Started_UpdateAlly]
takeResources: Ground=-1, Cliff=-1, AG=-1
[hiddenAction_Killed]
takeResources: EGround=1, ECliff=1, EAG=1
[hiddenAction_Killed_UpdateAlly]
takeResources: Ground=1, Cliff=1, AG=1
#TotalUnit=-1


[canBuild_1]
name: reclaim
pos: -1
#isLocked: false
#isLockedMessage: NONE
#isGuiBlinking: if not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000)

[canBuild_economy]
name: K_DrillT1, K_CannonTurret
pos: 1



[canBuild_turrets]
name: K_Refinary1, K_LaserDefence
pos: 2
#isLocked: if not self.hasUnitInTeam(withTag='drill', greaterThan=0, withinRange=400) and self.isControlledByAI()
#isLockedMessage: This building cannot operate without a nearby extractor drill


[canBuild_buildings]
name: Krovnork Bunker T2, Krovnork Factory T2, K_seaFactoryT2, K_FleshFarm
pos: 3
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000) and numberOfUnitsInEnemyTeam(withTag='Obomb', greaterThan=0, withinRange=1000)


[canBuild_antinuke]
name: Krovnork_antiNukeLauncher
pos: 4
isGuiBlinking: if not self.hasUnitInTeam(withTag='antinuke', greaterThan=0, withinRange=1000) and game.nukesEnabled()
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000) and numberOfUnitsInEnemyTeam(withTag='Obomb', greaterThan=0, withinRange=1000)


[canBuild_nuke]
name: K_Asteroid
pos: 5
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000) and numberOfUnitsInEnemyTeam(withTag='Obomb', greaterThan=0, withinRange=1000)


[canBuild_antiorbit]
name: Krovnork Launch Pit
pos: 2
isGuiBlinking: if not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000)



[hiddenAction_buildAO]
autoTrigger: if self.isControlledByAI() and self.NumberOfUnitsInTeam(withTag='Q_AO', greaterThan=0) and self.hasResources(credits=35000) and not self.tags(includes='Formation') and not self.tags(includes='Retreat') and not self.tags(includes='Attacking') and not self.tags(includes='DEFEND') and not self.hasActiveWaypoint(type='build')
requireConditional: if self.NumberOfUnitsInTeam(withTag='AOTurret', lessThan=1, withinRange=700) and self.NumberOfUnitsInTeam(withTag='Factory', greaterThan=0, withinRange=250)
addWaypoint_unitType: Krovnork Launch Pit
addResources: credits=-10000


[hiddenAction_Healed]
autoTrigger: if self.isControlledByAI() and self.hp(greaterThan=1300)
temporarilyRemoveTags: Retreat


[hiddenAction_Damaged]
autoTrigger: if self.isControlledByAI() and self.hp(lessThan=1100)
temporarilyAddTags: Retreat



[graphics]
total_frames: 1
teamColorsOnTurret: true
image:        K engine waist.png
image_wreak: Krovnork corpse.png
image_turret: K engine body.png

animation_idle_scale_start:1
animation_idle_scale_end:1.07
animation_idle_pingPong: true


image_shadow: SHADOW:K engine body.png
lock_shadow_rotation_with_main_turret: true
shadowOffsetX:2
shadowOffsetY:2

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 10
turretTurnSpeed: 3
maxAttackRange: 20
shootDelay: 35
aimOffsetSpread:0.2
turretRotateWithBody: false
isMelee: true
meleeEngangementDistance: 200

turretMultiTargeting: true


[turret_nanoTurret]
#right arm
x: 8
y: 0
warmup:30

turnSpeed: 4
size: 8


canShoot: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

isMainNanoTurret: true

image: K engine rarm.png



[turret_2]

#left melee arm

x: -8
y: 0
turnSpeed: 4
attachedTo: 3
canShoot: true
shoot_flame:NONE
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
projectile: 2
recoilOffset: 5
recoilOutTime: 5
recoilReturnTime: 20
delay: 25
image: K engine larm.png
warmup: 5


[turret_3]

#body

x: 0
y: 0
turnSpeed: 3
size: 20
canShoot: false
idleDir:0


[turret_4]
#head

x: 0
y: 0
idleDir:0
invisible: false
canShoot: true
turnSpeed: 3.2
idleDir:0
attachedTo: 3

canShoot: true
shoot_flame:NONE
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
projectile: 3
recoilOffset: 2
recoilOutTime: 2
recoilReturnTime: 10
delay: 45
image: K engine head.png
warmup: 15




[projectile_1]
#Bam, bam, bam!
speed: 15
drawSize: 0.95
drawType:2
frame: 4
color: #BB99DD
directDamage: 12
instant:false
laserEffect: false
life: 90
trailEffect: true

[projectile_2]

#You punched me! The tanks never punched me!


directDamage: 80
instant: true
laserEffect: false
life: 5
largeHitEffect: true
areaRadius: 20
areaDamage: 0


[projectile_3]

#You punched me! The tanks never punched me!


directDamage: 135
instant: true
laserEffect: false
life: 5
largeHitEffect: true
areaRadius: 10
areaDamage: 0




[leg_1]
x: -5
y: 0
attach_x: -2
attach_y: 0
moveSpeed: 2.3

rotateSpeed: 4

heightSpeed: 0.4
resetAngle:25

image_leg:  K engine leg.png
image_foot: K engine foot.png

#draw_foot_on_top: false
#dust_effect: false

#holdDisMin: 0.02
#holdDisMax: 0.04

[leg_2]
x: 5
y: 0
attach_x: 2
attach_y: 0
copyFrom: 1


[movement]
movementType: OVER_CLIFF
moveSpeed: 1
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.07

maxTurnSpeed: 2.0
turnAcceleration: 0.3
targetHeight:0.5
moveSlidingMode :false
moveIgnoringBody:false
moveSlidingDir: 0
reverseSpeedPercentage:0.8

slowDeathFall: false




[ai]
useAsBuilder: true
upgradedFrom: Krovnork Builder



