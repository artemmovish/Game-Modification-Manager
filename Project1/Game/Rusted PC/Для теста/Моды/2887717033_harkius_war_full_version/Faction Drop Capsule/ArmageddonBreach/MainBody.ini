[core]
name: FDC_ArmaSuper
displayText: Cataclysm
displayDescription: A breach has occured on an apocalyptic scale. \n -Weapons are modular, can be customised and upgraded. \n-Repairs held units. \n-Beyond this lies naught but a realm of chaos, where no order exists.
class: CustomUnitMetadata
price: 240000
maxHp: 15000
mass: 900000
selfRegenRate:1
armour: 5


copyFrom: ROOT:HQ_AI.ini
#borrowResourcesWhileAlive: Air=-27, AG=-15, AA=-15, Orbit=-9, AO=-3, AntiLD=-9
tags: Unit, AirT, AG3, AA3, NoCap, Factory, Titan, Orbit3, AO2, ALD3



techLevel: 1
experimental: true

buildSpeed: 0.00007
#availableInDemo: true

radius: 100
#displayRadius: 120
isBio: false
softCollisionOnAll: 60
fogOfWarSightRange:35


generation_credits: 54
generation_delay: 40





disableAllUnitCollisions: true





exit_dirOffset:0
exit_moveAwayAmount:250



maxTransportingUnits: 24
transportUnitsHealBy: 0.3
transportUnitsBlockAirAndWaterUnits: false
transportUnitsRequireMovementType: AIR, LAND, OVER_CLIFF, OVER_CLIFF_WATER, HOVER
transportUnitsCanUnloadUnits: if not self.isOverLiquid() or self.isOverwater()




canRepairBuildings: true
canRepairUnits : true

autoRepair: true
isBuilder: true



nanoRange: 250


nanoFactorySpeed:1
nanoRepairSpeed: 0.5
nanoBuildSpeed: 1.15





nukeOnDeath: true
nukeOnDeathRange: 200
nukeOnDeathDamage: 4000
nukeOnDeathDisableWhenNoNuke: true




[hiddenAction_Started]
takeResources: EAir=-27, EGround=-27, EOrbit=-9, EAO=-3, EAG=-15, EAA=-15, EAntiArmour=-9, EArtillery=-9, EAntiLD=-9
[hiddenAction_Started_UpdateAlly]
takeResources: Air=-27, Ground=-27, Orbit=-9, AO=-3, AG=-15, AA=-15, AntiArmour=-9, Artillery=-9, AntiLD=-9
[hiddenAction_Killed]
takeResources: EAir=27, EGround=27, EOrbit=9, EAO=3, EAG=15, EAA=15, EAntiArmour=9, EArtillery=9, EAntiLD=9
[hiddenAction_Killed_UpdateAlly]
takeResources: Air=27, Ground=27, Orbit=9, AO=3, AG=15, AA=15, AntiArmour=9, Artillery=9, AntiLD=9
#TotalUnit=-1


[hiddenAction_Healed]
autoTrigger: if self.isControlledByAI() and self.hp(greaterThan=14000)
temporarilyRemoveTags: Retreat

[hiddenAction_Damaged]
autoTrigger: if self.isControlledByAI() and self.hp(lessThan=10000)
temporarilyAddTags: Retreat





[action_selectSlot1]
@define slotId: 1
buildSpeed: 0s
#text: Slot ${slotId}
text: [
textAddUnitName: unitRef self.attachment(slot="unitSlot${slotId}")
textPostFix: ]

descriptionAddFromUnit: unitRef self.attachment(slot="unitSlot${slotId}")
descriptionAddUnitStats: unitRef self.attachment(slot="unitSlot${slotId}")

addResources: unsetFlag=1-10, setFlag=${slotId}
isGuiBlinking: if self.hasFlag(id=${slotId})
displayType: action
unitShownInUI: unitRef self.attachment(slot="unitSlot${slotId}")


iconExtraIsVisible: if self.hasFlag(id=${slotId})
iconExtraImage: icon_selected.png

pos:1


canPlayerCancel: false
allowMultipleInQueue: false

#No confirm needed on mobile
alwaysSinglePress: true
highPriorityQueue: true



#Makes the 'flags' for this unit appear to update instantly in the UI without waiting for
#confirmation from the server. Removes sluggish feeling when switching tabs.
#Note: If unit flags were also updated from non-ui sources this option might have visual side effects.
extraLagHidingInUI: true






[action_selectSlot2]
@copyFromSection: action_selectSlot1
@define slotId: 2
[action_selectSlot3]
@copyFromSection: action_selectSlot1
@define slotId: 3
[action_selectSlot4]
@copyFromSection: action_selectSlot1
@define slotId: 4
[action_selectSlot5]
@copyFromSection: action_selectSlot1
@define slotId: 5
[action_selectSlot6]
@copyFromSection: action_selectSlot1
@define slotId: 6






[action_selectSlotBuild]
@copyFromSection: action_selectSlot1
@define slotId: 10
pos:0
text: [ Build ]
textPostFix:
textAddUnitName: 
descriptionAddFromUnit: 
descriptionAddUnitStats:

unitShownInUI: 


[hiddenAction_onCreate]
autoTriggerOnEvent: created
addResources: setFlag=10



[attachment_unitSlot1]

x:0
y:65
#idleDir:-60
idleDir:0
idleDirReversing:0

onCreateSpawnUnitOf:Breach_emptySlot
addTransportedUnits: true
setDrawLayerOnTop: true
lockLegMovement:false

canBeAttackedAndDamaged: true
isUnselectable: false

showAllActionsFrom:if self.hasFlag(id=1)

#resetRotationWhenNotAttacking:true
lockRotation: true

createIncompleteIfParentIs: false

redirectDamageToParent: true
redirectDamageToParent_shieldOnly: true

[attachment_unitSlot2]
@copyFromSection: attachment_unitSlot1

x:35
y:40
#idleDir:60
idleDir:45
idleDirReversing:45

showAllActionsFrom:if self.hasFlag(id=2)


[attachment_unitSlot3]
@copyFromSection: attachment_unitSlot1
x:-35
y:40
idleDir:-45
idleDirReversing:-45

showAllActionsFrom:if self.hasFlag(id=3)


[attachment_unitSlot4]
@copyFromSection: attachment_unitSlot1
x:65
y:10
idleDir:90
idleDirReversing:90

showAllActionsFrom:if self.hasFlag(id=4)

[attachment_unitSlot5]
@copyFromSection: attachment_unitSlot1


x:-65
y:10
#idleDir:-120

idleDir:-90
idleDirReversing:-90

showAllActionsFrom:if self.hasFlag(id=5)

[attachment_unitSlot6]
@copyFromSection: attachment_unitSlot1


x:0
y:-50
#idleDir:120
idleDir:180
idleDirReversing:180


showAllActionsFrom:if self.hasFlag(id=6)















[canBuild_1]
name: A_Slug
pos:  31
#forceNano: true
isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true




[canBuild_2]
name: A_Biped, A_Equine
pos:  33
#forceNano: true
isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true




[canBuild_3]
name: A_Lifter, A_Avian, A_Pod
pos:  34
#forceNano: true
isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true




[canBuild_4]
name: A_Rift, A_Binding
pos:  30
#tech: 30
isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true




[canBuild_5]
name: A_Builder
pos:  30
#tech: 32
isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true
isLocked: if self.hasUnitInTeam(withTag='builder', greaterThan=2, withinRange=180)
isLockedMessage: Builder density is too high. \n-Spread out!



[canBuild_6]
name: A_Fighter
pos:  35
#tech: 2
isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true





[canBuild_7]
name: reclaim
pos:  -1
isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true







[hiddenAction_unload]
autoTrigger: if self.isControlledByAI() and self.transportingCount(greaterThan=0) and self.hp(lessThan=6000) or self.isControlledByAI() and self.transportingCount(greaterThan=0) and not self.isFlying()
startUnloadingTransport: true
clearAllWaypoints: false




[action_orbital]
text: Engage Boosters
buildSpeed: 1s
convertTo: FDC_ArmaSuper_O
isVisible: true
highPriorityQueue: true
pos: 0.1
ai_isDisabled: true





[hiddenAction_burn]
autoTrigger: if not self.hp(lessThan=1)
displayType: action
isVisible: false
text: smoke
spawnEffects: CUSTOM:smoke






[graphics]
drawLayer: experimentals

total_frames: 1
teamColorsOnTurret: true

image:        Body.png
image_wreak:  NONE
image_turret: RepairTurret.png
icon_zoomed_out: MapX.png

image_shadow: AUTO
shadowOffsetX:3
shadowOffsetY:3



[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 18
turretTurnSpeed: 4
maxAttackRange: 350
shootDelay: 5
turretMultiTargeting: true

shootDamageMultiplier: 0.8





[turret_1]
#nano turret
x: 0
y: 0
warmup:10
image: RepairTurret.png

size: 20

canShoot: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turnSpeedAcceleration: 0.12

isMainNanoTurret: true




[turret_2]
x: 0
y: 50
canShoot: true

invisible: true

shoot_sound:plasma_fire
shoot_sound_vol:0.2
shoot_flame:shockwave
shoot_light:#FFccCCEE

delay: 0.3s
warmup: 0
projectile: 1

idleDir: 180
limitingAngle: 100





[turret_3]
x: 0
y: -50
canShoot: true

invisible: true

shoot_sound:plasma_fire
shoot_sound_vol:0.2
shoot_flame:shockwave
shoot_light:#FFccCCEE


delay: 0.3s
warmup: 0


idleDir: 0
limitingAngle: 100






[projectile_1]
directDamage: 270
life: 70
speed: 8
#ballistic: true
#ballistic_delaymove_height:0
#ballistic_height: 4
image: LargeBolt.png
areaDamage: 70
areaRadius: 50

largeHitEffect: true

trailEffect: true

deflectionPower: 0.5








[effect_smoke]
priority:veryhigh
dirOffsetRandom: 180

image: Smoke.png
atmospheric: true

xOffsetRelativeRandom: 45
yOffsetRelativeRandom: 45

life: 200
fadeOut: true
attachedToUnit: false
#color: #fdc14d


fadeInTime:35
scaleFrom: 0.5
scaleTo: 2
alpha: 0.7
drawUnderUnits:false
hSpeed: 0.1








[movement]
movementType: AIR
moveSpeed: 0.1
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.02

landOnGround: true
targetHeight: 60

maxTurnSpeed: 0.5
turnAcceleration: 0.05

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  45


slowDeathFall: true


[ai]
useAsBuilder: true

ai_upgradePriority: 0.25


