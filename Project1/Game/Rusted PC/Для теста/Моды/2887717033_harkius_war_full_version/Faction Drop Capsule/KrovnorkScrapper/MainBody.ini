[core]
name: FDC_KrovnorkSuper
displayText: Krovnork Scrapper ship
displayDescription: Closer to a gigantic pile of junk than a ship. \n -Weapons are modular, can be customised and upgraded. \n-Repairs held units. \n-Should they win, this tribe will recover their losses from the loot they aquire, mashing together ruined machinary to create stuff like this.
class: CustomUnitMetadata
price: 240000
maxHp: 7000
mass: 900000

techLevel: 1
experimental: true

buildSpeed: 0.00007
#availableInDemo: true

radius: 100
#displayRadius: 120
isBio: false
softCollisionOnAll: 60
fogOfWarSightRange:35


generation_credits: 54
generation_delay: 40



copyFrom: ROOT:HQ_AI.ini
#borrowResourcesWhileAlive: Air=-27, AG=-15, AA=-15, Orbit=-9, AO=-3, AntiLD=-9
tags: Unit, AirT, AG3, AA3, NoCap, Factory, Titan, Orbit3, AO2, ALD3



disableAllUnitCollisions: true





maxShield: 7000
shieldRegen: 0.15
selfRegenRate:0.05





exit_dirOffset:0
exit_moveAwayAmount:250



maxTransportingUnits: 24
transportUnitsHealBy: 0.3
transportUnitsBlockAirAndWaterUnits: false
transportUnitsRequireMovementType: AIR, LAND, OVER_CLIFF, OVER_CLIFF_WATER, HOVER
transportUnitsCanUnloadUnits: if not self.isOverLiquid() or self.isOverwater()




canRepairBuildings: true
canRepairUnits : true

autoRepair: true
isBuilder: true



nanoRange: 250


nanoFactorySpeed:1
nanoRepairSpeed: 0.5
nanoBuildSpeed: 1





nukeOnDeath: true
nukeOnDeathRange: 200
nukeOnDeathDamage: 4000
nukeOnDeathDisableWhenNoNuke: true


[hiddenAction_Started]
takeResources: EGround=-27, EAir=-27, EAG=-15, EAA=-15, EAntiLD=-9, EOrbit=-9, EAO=-3, EAntiArmour=-3
[hiddenAction_Started_UpdateAlly]
takeResources: Ground=-27, Air=-27, AG=-15, AA=-15, AntiLD=-9, Orbit=-9, AO=-3, AntiArmour=-3
[hiddenAction_Killed]
takeResources: EGround=27, EAir=27, EAG=-15, EAA=15, EAntiLD=9, EOrbit=9, EAO=3, EAntiArmour=3
[hiddenAction_Killed_UpdateAlly]
takeResources: Ground=27, Air=27, AG=-15, AA=15, AntiLD=9, Orbit=9, AO=3, AntiArmour=3
#TotalUnit=-1



[hiddenAction_Healed]
autoTrigger: if self.isControlledByAI() and self.hp(greaterThan=6800)
temporarilyRemoveTags: Retreat

[hiddenAction_Damaged]
autoTrigger: if self.isControlledByAI() and self.hp(lessThan=5800)
temporarilyAddTags: Retreat



[action_selectSlot1]
@define slotId: 1
buildSpeed: 0s
#text: Slot ${slotId}
text: [
textAddUnitName: unitRef self.attachment(slot="unitSlot${slotId}")
textPostFix: ]

descriptionAddFromUnit: unitRef self.attachment(slot="unitSlot${slotId}")
descriptionAddUnitStats: unitRef self.attachment(slot="unitSlot${slotId}")

addResources: unsetFlag=1-10, setFlag=${slotId}
isGuiBlinking: if self.hasFlag(id=${slotId})
displayType: action
unitShownInUI: unitRef self.attachment(slot="unitSlot${slotId}")


iconExtraIsVisible: if self.hasFlag(id=${slotId})
iconExtraImage: icon_selected.png

pos:1


canPlayerCancel: false
allowMultipleInQueue: false

#No confirm needed on mobile
alwaysSinglePress: true
highPriorityQueue: true



#Makes the 'flags' for this unit appear to update instantly in the UI without waiting for
#confirmation from the server. Removes sluggish feeling when switching tabs.
#Note: If unit flags were also updated from non-ui sources this option might have visual side effects.
extraLagHidingInUI: true






[action_selectSlot2]
@copyFromSection: action_selectSlot1
@define slotId: 2
[action_selectSlot3]
@copyFromSection: action_selectSlot1
@define slotId: 3
[action_selectSlot4]
@copyFromSection: action_selectSlot1
@define slotId: 4
[action_selectSlot5]
@copyFromSection: action_selectSlot1
@define slotId: 5
[action_selectSlot6]
@copyFromSection: action_selectSlot1
@define slotId: 6






[action_selectSlotBuild]
@copyFromSection: action_selectSlot1
@define slotId: 10
pos:0
text: [ Build ]
textPostFix:
textAddUnitName: 
descriptionAddFromUnit: 
descriptionAddUnitStats:

unitShownInUI: 


[hiddenAction_onCreate]
autoTriggerOnEvent: created
addResources: setFlag=10



[attachment_unitSlot1]

x:-36
y:83
#idleDir:-60
idleDir:0
idleDirReversing:0

onCreateSpawnUnitOf:Scrapper_emptySlot
addTransportedUnits: true
setDrawLayerOnTop: true
lockLegMovement:false

canBeAttackedAndDamaged: true
isUnselectable: false

showAllActionsFrom:if self.hasFlag(id=1)

#resetRotationWhenNotAttacking:true
lockRotation: true

createIncompleteIfParentIs: false

redirectDamageToParent: true
redirectDamageToParent_shieldOnly: true

[attachment_unitSlot2]
@copyFromSection: attachment_unitSlot1

x:-10
y:70
#idleDir:60
idleDir:45
idleDirReversing:45

showAllActionsFrom:if self.hasFlag(id=2)


[attachment_unitSlot3]
@copyFromSection: attachment_unitSlot1
x:-73
y:4
idleDir:-45
idleDirReversing:-45

showAllActionsFrom:if self.hasFlag(id=3)


[attachment_unitSlot4]
@copyFromSection: attachment_unitSlot1
x:70
y:25
idleDir:45
idleDirReversing:45

showAllActionsFrom:if self.hasFlag(id=4)

[attachment_unitSlot5]
@copyFromSection: attachment_unitSlot1


x:12
y:25
#idleDir:45

idleDir:45
idleDirReversing:45

showAllActionsFrom:if self.hasFlag(id=5)

[attachment_unitSlot6]
@copyFromSection: attachment_unitSlot1


x:7
y:-51
#idleDir:120
idleDir:180
idleDirReversing:180


showAllActionsFrom:if self.hasFlag(id=6)
















[canBuild_1]
name: K_DrillT1, Krovnork Bunker, Krovnork Factory, K_CannonTurret
pos:  30
forceNano: false

isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true

[canBuild_5]
name: Krovnork_antiNukeLauncher
pos: 30
isGuiBlinking: if not self.hasUnitInTeam(withTag='antinuke', greaterThan=0, withinRange=1000) and game.nukesEnabled()
isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true


[canBuild_2]
name: Krovnork Builder, Krovnork Mechanic, dwarfnork, Kwogmak1, krimk
pos:  31
forceNano: false

isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true


[canBuild_3]
name: Krovnork Gunner, Krovnork Artillary
pos:  31
forceNano: false

isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Land', greaterThan=0)




[canBuild_4]
name: Boomchopper, skygunner
pos:  32
forceNano: false

isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true



[canBuild_showReclaimAction]
name: reclaim
pos:  -1

isVisible: if self.hasFlag(id=10)

extraLagHidingInUI: true







[hiddenAction_unload]
autoTrigger: if self.isControlledByAI() and self.transportingCount(greaterThan=0) and self.hp(lessThan=4000) or self.isControlledByAI() and self.transportingCount(greaterThan=0) and not self.isFlying()
startUnloadingTransport: true
clearAllWaypoints: false




[action_orbital]
text: Engage Boosters
buildSpeed: 1s
convertTo: FDC_KrovnorkSuper_O
isVisible: true
highPriorityQueue: true
pos: 0.1
ai_isDisabled: true







[graphics]
drawLayer: experimentals

total_frames: 1
teamColorsOnTurret: true

image:        Body.png
image_wreak:  NONE
image_turret: Builder.png
icon_zoomed_out: MapX.png

image_shadow: AUTO
shadowOffsetX:3
shadowOffsetY:3
movementEffect: CUSTOM:thrust
movementEffectRate: 3



[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 18
turretTurnSpeed: 4
maxAttackRange: 320
shootDelay: 5
turretMultiTargeting: true







[turret_1]
#nano turret
x: 0
y: -25
warmup:10

size: 20

canShoot: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turnSpeedAcceleration: 0.12

isMainNanoTurret: true




[turret_2]
x: -55
y: 25
canShoot: true

invisible: true

shoot_sound:large_gun_fire2
shoot_sound_vol:0.3
shoot_flame:large
shoot_light:#FFff925c

delay: 0.1s
warmup: 0.1s
projectile: 1

idleDir: -120
limitingAngle: 100





[turret_3]
x: 40
y: 25
canShoot: true

invisible: true

shoot_sound:large_gun_fire2
shoot_sound_vol:0.3
shoot_flame:large
shoot_light:#FFff925c


delay: 0.1s
warmup: 0.1s


idleDir: 90
limitingAngle: 100



[turret_4]
x: 25
y: 30
canShoot: true

invisible: true

shoot_sound:large_gun_fire2
shoot_sound_vol:0.3
shoot_flame:large
shoot_light:#FFff925c


delay: 0.1s
warmup: 0.1s


idleDir: 0
limitingAngle: 90




[turret_4]
x: 15
y: -60
canShoot: true

invisible: true

shoot_sound:large_gun_fire2
shoot_sound_vol:0.3
shoot_flame:large
shoot_light:#FFff925c


delay: 0.1s
warmup: 0.1s


idleDir: 180
limitingAngle: 135




[projectile_1]
#minigun
speed: 15
drawSize: 0.95
drawType:2
frame: 4
color: #BB99DD
directDamage: 50
instant:false
laserEffect: false
life: 90
trailEffect: true

largeHitEffect: true











[effect_thrust]
image: thrust.png
life: 60
fadeOut: true
attachedToUnit: false
fadeInTime:15
drawUnderUnits:false
ySpeedRelative:-1
atmospheric: true
#scaleFrom: 1
#scaleTo: 1.6







[movement]
movementType: AIR
moveSpeed: 0.32
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.02

landOnGround: true
targetHeight: 60

maxTurnSpeed: 0.5
turnAcceleration: 0.05

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  45


slowDeathFall: true


[ai]
useAsBuilder: true

ai_upgradePriority: 0.25


