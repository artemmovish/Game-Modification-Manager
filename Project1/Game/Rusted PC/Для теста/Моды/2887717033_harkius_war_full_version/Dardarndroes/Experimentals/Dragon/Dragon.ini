[core]
name: D_Dragon
displayText: Dragon
displayDescription: Long range, airborne death-bringer. \n -Attacks from a very long range. \n -Fast. \n-Not efficient against buildings.  
class: CustomUnitMetadata
price: 35000
maxHp: 1100
mass: 10000

experimental: true

generation_credits: -30
generation_delay: 40

copyFrom: ROOT:Unit_AI_Base.ini
borrowResourcesWhileAlive: TotalUnit=-1, Air=-9, AG=-7, AA=-7, AntiShield=-9, AntiArmour=-3, Artillery=3, AO=-3
tags: Unit, Air3, AG3, AA3, AO, AntiShield3, AntiArmour2, anti-orbital

techLevel: 3

buildSpeed: 135s
#availableInDemo: true

radius: 50
isBio: false

softCollisionOnAll: 10



selfRegenRate:0.1
fogOfWarSightRange: 30


energyMax: 10
energyRegen: 0.02
energyNeedsToRechargeToFull: true





[hiddenAction_Started]
takeResources: EAir=-9, EAG=-7, EAA=-7, EAntiShield=-9, EAntiArmour=-3, EArtillery=3, EAO=-3
[hiddenAction_Started_UpdateAlly]
takeResources: Air=-9, AG=-7, AA=-7, AntiShield=-9, AntiArmour=-3, Artillery=3, AO=-3
[hiddenAction_Killed]
takeResources: EAir=9, EAG=7, EAA=7, EAntiShield=9, EAntiArmour=3, EArtillery=-3, EAO=3
[hiddenAction_Killed_UpdateAlly]
takeResources: Air=9, AG=7, AA=7, AntiShield=9, AntiArmour=3, Artillery=-3, AO=3
#TotalUnit=-1





[action_sonic]
convertTo: D_Dragon2
text: Sonic Collision
pos: 1
buildSpeed: 0s
description: Fly fast enough to emit a damaging shock-wave.\n-Damages the dragon as well.
displayType: action
isLocked: if self.hp(lessThan=400)
price: energy=10
addResources: energy=10




[hiddenAction_Healed]
autoTrigger: if self.isControlledByAI() and self.hp(greaterThan=1050)
temporarilyRemoveTags: Retreat

[hiddenAction_Damaged]
autoTrigger: if self.isControlledByAI() and self.hp(lessThan=800)
temporarilyAddTags: Retreat



[hiddenAction_runNow]
autoTrigger: if self.isControlledByAI() and not self.energy(lessThan=10) and self.hp(lessThan=800) and numberOfUnitsInEnemyTeam(greaterThan=2, withinRange=500) and not self.hp(lessThan=600)
clearAllWaypoints: true
addWaypoint_type: move
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_tagged: Safety
alsoQueueAction: sonic





[graphics]
total_frames: 1

image:        body.png
image_wreak:  corpse.png
image_turret: NONE


image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
#isFixedFiring: true
maxAttackRange: 530

shootDelay: 40
aimOffsetSpread: 0

turretRotateWithBody: true


[turret_1]

#right gunning arm

x: 0
y: 40
projectile: 2

turnSpeed: 25
turnSpeedAcceleration:20

shoot_sound:ROOT:Audio/las.ogg
shoot_sound_vol:0.5
shoot_flame:shockwave
shoot_light:#FFFFFFAA

canShoot: true

delay: 145
warmup:90

invisible: true


[turret_2]

#right gunning arm

x: 35
y: 10
projectile: 1

turnSpeed: 25
turnSpeedAcceleration:20

shoot_sound:lighting_burst
shoot_sound_vol:0.1
shoot_flame:shockwave
shoot_light:#FFFFFFAA

canShoot: true

delay: 70
warmup:0

invisible: true



[turret_3]

#left arm
x: -35
y: 10
projectile: 1

turnSpeed: 25
turnSpeedAcceleration:20

shoot_sound:lighting_burst
shoot_sound_vol:0.1
shoot_flame:shockwave
shoot_light:#FFFFFFAA

linkDelayWithTurret: 2
warmup: 20

canShoot: true


invisible: true




[projectile_1]
#BRING ME MORE THUNDER BOLTS!
directDamage: 115
largeHitEffect: true
#areaDamage: 100
#areaRadius: 100
drawSize: 1
instant:true
lightingEffect: true
life: 8
lightColor: #ff0000
lightSize: 0.3
shieldDamageMultiplier: 2
shieldDefectionMultiplier: 0.1

buildingDamageMultiplier: 0.03



[projectile_2]
#IMA FIRIN MAH LASER
directDamage: 100
largeHitEffect: true
areaDamage: 95
areaRadius: 145
drawSize: 1
instant:true
laserEffect: true
life: 8
#lightColor: #ff0000
#lightSize: 0.3
shieldDamageMultiplier: 0.2
armourIgnoreAmount: 500

mutator1_ifUnitWithTags: orbital
mutator1_directDamageMultiplier: 7
mutator1_areaDamageMultiplier: 3





[movement]
movementType: AIR
moveSpeed: 0.9
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.2

maxTurnSpeed: 2.5
turnAcceleration: 0.2

reverseSpeedPercentage: 0.4

targetHeight: 100
targetHeightDrift: 15

moveSlidingMode :true
moveIgnoringBody: true
moveSlidingDir:  181


slowDeathFall: true
