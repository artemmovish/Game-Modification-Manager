
[core]
name: D_Hive3
displayText: Dardarndroe Nest
displayDescription: -Facility for building vehicles \n- Can produce better stuff. \n-Still upgradable.  
class: CustomUnitMetadata
price: 5700
maxHp: 3000
mass: 9000



#footprint used for collisions with units (left, up, right, down)
footprint: -1,-1,1,1
#used for placement, and placement of other buildings
constructionFootprint:-1,-1,1,1

#buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:10

copyFrom: ROOT:Dardarndroes/Resource.ini
generation_resources: Data=1, credits=52
generation_delay: 40


#borrowResourcesWhileAlive: AG=-3, AA=-1, AntiArmour=-3
tags: Building, Turret2, Factory, NoCap, Economy, antinuke, Repair, anti-stealth, AStealth


disableAllUnitCollisions: true





radius: 25
displayRadius: 25
buildingSelectionOffset: 1
isBuilding: true

placeOnlyOnResPool: true
unitsSpawnedOnDeath: D_Scavanger*15, D_Drone2*20

energyMax: 1
energyRegen: 0.0012
energyNeedsToRechargeToFull: true

techLevel: 1
buildSpeed: 0.0005
#availableInDemo: true
selfBuildRate: 0.01

selfRegenRate:1



#armour: 1


exit_x: 0
exit_y: -1

softCollisionOnAll: 3

#builtFrom_1_name: landFactory
#builtFrom_1_pos:  5




[hiddenAction_Started]
takeResources: ETurret=-3, EAG=-3, EAA=-3, EAntiArmour=-3
[hiddenAction_Started_UpdateAlly]
takeResources: AG=0
[hiddenAction_Killed]
takeResources: ETurret=3, EAG=3, EAA=3, EAntiArmour=3
[hiddenAction_Killed_UpdateAlly]
takeResources: AG=0
#TotalUnit=-1




[action_upgrade_1]
convertTo: D_Hive4
price:  5000
text: Develop Tech
description: -Increases credits. \n-Improves defence and unit selection. \n-Improves anti-nuke capacity. 
displayType: Upgrade
buildSpeed: 90s
pos: 0
iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF
descriptionAddUnitStats: ${section.convertTo}

alsoTriggerAction: upStat, upStat_UpdateAlly

[hiddenAction_upStat]
@copyFromSection: hiddenAction_Started
takeResources: ETurret=-6, EAntiArmour=-1, EAA=-2, EAG=-2
[hiddenAction_upStat_UpdateAlly]
@copyFromSection: hiddenAction_Started
takeResources_includeUnitsWithinRange_team: allyNotOwn
takeResources: AntiArmour=0







[canBuild_rally]
name: setRally
pos: -1
#isLocked: false
#isLockedMessage: NONE
#isGuiBlinking: if not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000)

[canBuild_1]
name: D_Scavanger
pos: 1

[canBuild_2]
name: D_Drone3
pos: 1

[canBuild_Netter]
name: D_Netter
pos: 1
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_AA', greaterThan=0)

[canBuild_Bloat]
name: D_Bloat
pos: 2
isLocked: if not self.hasResources(Bloat=1) or self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Air', greaterThan=0) and self.hasUnitInTeam(withTag='Unit', greaterThan=5) or self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_AG', greaterThan=0)

[canBuild_Carrier]
name: D_Carrier
pos: 3
isLocked: if not self.hasResources(Carrier=1)



[hiddenAction_FinishBuild]
buildSpeed: 0.1s
addResources: unsetFlag=1


[hiddenAction_Drone1]
autoTrigger: if self.isControlledByAI() and self.hasResources(credits=3000) and self.NumberOfUnitsInTeam(withTag='HELP', greaterThan=0, withinRange=350) and not self.hasFlag(id=1) or self.isControlledByAI() and self.hasResources(credits=3000) and self.NumberOfUnitsInTeam(withTag='ALL_ATTACK', greaterThan=0) and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=900) and not self.hasFlag(id=1)
alsoQueueAction: Drone2
addResources: setFlag=1, credits=-80

[hiddenAction_Drone2]
buildSpeed: 1.8s
#addResources: credits=-500
alsoQueueAction: FinishBuild
spawnUnits: D_Drone3





[action_buildAntiNuke]
price:  4000
text: i:gui.actions.buildAntiNuke
description: Builds anti-nuke interceptor missiles. \n-Max of 2 in storage. 
displayType: NONE
buildSpeed: 0.001
pos: 0.2
isActive:if self.ammoIncludingQueued(lessThan=2)
addResources: ammo=1
isLocked: if not game.nukesEnabled()
ai_isDisabled: if self.ammo(greaterThan=1)


[action_showAntiNukeCount]
#infoOnly: true
addResources: ammo=1
price:  ammo=1
text: i:gui.actions.antiNukeCount
description:i:gui.actions.antiNukeCount.description
displayType: none
buildSpeed: 0s
pos: 0.1
displayRemainingStockpile: true
highPriorityQueue: true
isActive:false
isVisible: if game.nukesEnabled()




[hiddenAction_AntiN]
autoTrigger: if self.isControlledByAI() and self.ammo(lessThan=1) and self.hasResources(credits=8000) and not self.hasFlag(id=1) and game.nukesEnabled()
alsoQueueAction: AntiN2
addResources: setFlag=1, credits=-4000

[hiddenAction_AntiN2]
buildSpeed: 16.7s
alsoQueueAction: AntiN3
addResources: ammo=1

[hiddenAction_AntiN3]
buildSpeed: 2s
addResources: unsetFlag=1






[action_drone]
isVisible: false
#autoTrigger: if self.isEnergyFull()
buildSpeed: 0.05s
highPriorityQueue: true
addResources: energy=-1

fireTurretXAtGround: drone
fireTurretXAtGround_withOffset: 0, -35




[graphics]
total_frames: 1

image:        l3.png
image_back: floor.png
image_wreak:  ruin.png

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1




[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: true

turretSize: 3
turretTurnSpeed: 20


maxAttackRange: 240
shootDelay: 50




[turret_2]

#My god, BEES!
x: 15
y: 5
invisible: true
projectile: 1
turnSpeed: 10

shoot_sound:ROOT:Audio/bee.ogg
shoot_sound_vol:0.2
canShoot: true



shoot_light:#ff0000
warmup: 8
delay: 8

[turret_drone]
#drone spawner
x:0
y:0
projectile: 2
invisible: true
canShoot: false





[turret_silo]
#anti-nuke turret
x: 30
y: 25
idleDir:0

invisible: true
canShoot: false

interceptProjectiles_withTags: nuke
interceptProjectiles_andTargetingGroundUnderDistance: 1000
interceptProjectiles_andUnderDistance: 1700
interceptProjectiles_andOverHeight:50


shoot_sound:nuke_launch
shoot_sound_vol:0.15
shoot_light:#FFEECCCC

projectile: antiNukeProjectile
size: 1

turnSpeed: 40

resourceUsage: ammo=1

shoot_flame:shockwave, smoke
#shoot_flame:custom:nukeLaunch



[projectile_antiNukeProjectile]
#anti-nuke
directDamage: 600

life: 99999
speed: 0.2
targetSpeed: 7
targetSpeedAcceleration:0.05

trailEffect: true
largeHitEffect: true
ballistic: true
ballistic_delaymove_height:80
ballistic_height: 110
frame: 10
#shadowFrame:1

drawType:0

targetGround: true
areaDamage: 100
areaRadius: 60

areaExpandTime:75

deflectionPower:-1


lightColor: #FFEEEE00
lightSize: 1

alwaysVisibleInFog: true




[projectile_1]
#NOT THE BEES!
directDamage: 70
drawSize: 0.8
life: 230
speed: 0.2
targetSpeed: 5

largeHitEffect: true

trailEffect: false
ballistic: true
ballistic_delaymove_height:40
ballistic_height: 50
image: bee.png


autoTargetingOnDeadTarget: true

[projectile_2]
life: 5
instant: true
spawnUnit: D_Drone3

directDamage: 0



[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1



[ai]


upgradedFrom: D_hive



