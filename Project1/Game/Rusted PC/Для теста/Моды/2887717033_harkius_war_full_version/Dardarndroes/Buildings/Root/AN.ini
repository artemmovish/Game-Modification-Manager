[core]
name: D_RootNuke
displayText: Blast Pit
displayDescription: A hole that can build anti-nukes and launch them.
class: CustomUnitMetadata
price: 7100
maxHp: 1000
mass: 200000


#footprint used for collisions with units (left, up, right, down)
footprint: -1,-1,1,1
#used for placement, and placement of other buildings
constructionFootprint:-1,-1,1,1

copyFrom: ROOT:Building_AI_Base.ini
#borrowResourcesWhileAlive: AG=-3, AntiArmour=-3
tags: Building, NoCap, Economy, antinuke




disableAllUnitCollisions: true




techLevel: 1
experimental: false

buildSpeed: 0.0002
#availableInDemo: true
selfBuildRate: 0.0005

selfRegenRate:0.25

fogOfWarSightRange: 10
radius: 25
#displayRadius: 25
isBio: true
softCollisionOnAll: 3

isBuilding: true

generation_credits: 5
generation_delay: 40

unitsSpawnedOnDeath: D_Blob



[hiddenAction_AntiN]
autoTrigger: if self.isControlledByAI() and self.ammo(lessThan=1) and self.hasResources(credits=15000) and not self.hasFlag(id=1)
alsoQueueAction: AntiN2
addResources: setFlag=1, credits=-4000

[hiddenAction_AntiN2]
buildSpeed: 45s
alsoQueueAction: AntiN3
addResources: ammo=1

[hiddenAction_AntiN3]
buildSpeed: 2s
addResources: unsetFlag=1



[action_buildAntiNuke]
price:  4000
text: i:gui.actions.buildAntiNuke
description: Builds anti-nuke interceptor missiles. \n-Max of 2 in storage. 
displayType: NONE
buildSpeed: 36s
pos: 0.2
isActive:if self.ammoIncludingQueued(lessThan=2)
addResources: ammo=1

ai_isDisabled: if self.ammo(greaterThan=2)

[action_showAntiNukeCount]
#infoOnly: true
addResources: ammo=1
price:  ammo=1
text: i:gui.actions.antiNukeCount
description:i:gui.actions.antiNukeCount.description
displayType: none
buildSpeed: 0s
pos: 0.1
displayRemainingStockpile: true
highPriorityQueue: true
isActive:false
isVisible: if game.nukesEnabled()



[graphics]
total_frames: 1

image:        AntiNuke.png
image_back: base.png
image_wreak:  base.png
image_turret: NONE


image_shadow: AUTO
shadowOffsetX:3
shadowOffsetY:3

[attack]
canAttack: false
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false




[turret_silo]
#anti-nuke turret
x: 0
y: 15
idleDir:0

invisible: true
canShoot: false

interceptProjectiles_withTags: nuke
interceptProjectiles_andTargetingGroundUnderDistance: 900
interceptProjectiles_andUnderDistance: 1300
interceptProjectiles_andOverHeight:50


shoot_sound:nuke_launch
shoot_sound_vol:0.15
shoot_light:#FFEECCCC

projectile: antiNukeProjectile
size: 1

turnSpeed: 40

resourceUsage: ammo=1

shoot_flame:shockwave, smoke
#shoot_flame:custom:nukeLaunch



[projectile_antiNukeProjectile]
#anti-nuke
directDamage: 600

life: 99999
speed: 0.5
targetSpeed: 7
targetSpeedAcceleration:0.05

trailEffect: true
largeHitEffect: true
ballistic: true
ballistic_delaymove_height:80
ballistic_height: 110
frame: 10
#shadowFrame:1

frame: 11

lightColor: #FFccCCEE
lightSize: 2

targetGround: true
areaDamage: 100
areaRadius: 60

areaExpandTime:75

deflectionPower:-1


alwaysVisibleInFog: true





[movement]
movementType: NONE
moveSpeed: 0.5
moveAccelerationSpeed: 0.05
moveDecelerationSpeed: 0.1

landOnGround: true


maxTurnSpeed: 2
turnAcceleration: 0.1

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  45


slowDeathFall: true


[ai]

buildPriority: 0.25
ai_upgradePriority: 0.6

maxEachBase: 2