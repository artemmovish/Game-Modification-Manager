
[core]
name: D_Filter
displayText: Filter tower 
displayDescription: -Fires extremely corrosive clouds of dardarndroe cells.   
class: CustomUnitMetadata
price: 1500
maxHp: 2000
mass: 9000



copyFrom: ROOT:Dardarndroes/Resource.ini
#borrowResourcesWhileAlive: AA=-3, AntiArmour=-1
tags: Building, Turret, AG

disableAllUnitCollisions: true





#footprint used for collisions with units (left, up, right, down)
footprint: -1,-1,0,0
#used for placement, and placement of other buildings
constructionFootprint: -1, -1, 1, 1

buildingToFootprintOffsetX:0
buildingToFootprintOffsetY:0

selfRegenRate:0.5

techLevel: 1
buildSpeed: 0.002
#availableInDemo: true
selfBuildRate: 0.0005
radius: 15
#displayRadius: 80
isBio: true
isBuilding: true


tags: Safety, Building, AGTurret, AG, Light


softCollisionOnAll: 3


#builtFrom_1_name: landFactory
#builtFrom_1_pos:  5


[hiddenAction_Started]
takeResources: ETurret=-1, EAG=-2
[hiddenAction_Started_UpdateAlly]
takeResources: AG=0
[hiddenAction_Killed]
takeResources: ETurret=1, EAG=2
[hiddenAction_Killed_UpdateAlly]
takeResources: AG=0
#TotalUnit=-1



[action_upgrade]
convertTo: D_nanoturret
text: Spore Upgrade
pos: 1
description: A more powerful turret that fires out spores. Gains limited anti-air ability.
displayType: action
price: 4500
buildSpeed: 0.0005
ai_isDisabled: false
descriptionAddUnitStats: ${section.convertTo}

alsoTriggerAction: upStat, upStat_UpdateAlly

[hiddenAction_upStat]
@copyFromSection: hiddenAction_Started
takeResources: EAG=-2, EAA=-1, ETurret=-2
[hiddenAction_upStat_UpdateAlly]
@copyFromSection: hiddenAction_Started
takeResources_includeUnitsWithinRange_team: allyNotOwn
takeResources: AG=-1





[action_upgrade2]
convertTo: D_NetTurret
text: Web Upgrade
pos: 1
description: Adds a powerful anti-air attack to the turret
displayType: action
price: 5000
buildSpeed: 0.0005
ai_isDisabled: false
descriptionAddUnitStats: ${section.convertTo}

alsoTriggerAction: upStat2, upStat_UpdateAlly2

[hiddenAction_upStat2]
@copyFromSection: hiddenAction_Started
takeResources: EAA=-3, ETurret=-2
[hiddenAction_upStat_UpdateAlly2]
@copyFromSection: hiddenAction_Started
takeResources_includeUnitsWithinRange_team: allyNotOwn
takeResources: AA=-1





[action_upgrade3]
convertTo: D_CannonTurret
text: Cannon Upgrade
pos: 1
description: Cybernetically augments the turret with powerful cannons that can target air and ground.
displayType: action
price: 7000
buildSpeed: 0.0005
ai_isDisabled: false
descriptionAddUnitStats: ${section.convertTo}

alsoTriggerAction: upStat3, upStat_UpdateAlly3

[hiddenAction_upStat3]
@copyFromSection: hiddenAction_Started
takeResources: EAG=-2, EAA=-3, EAntiArmour=-1, ETurret=-3
[hiddenAction_upStat_UpdateAlly3]
@copyFromSection: hiddenAction_Started
takeResources_includeUnitsWithinRange_team: allyNotOwn
takeResources: AG=-1, AA=-1




[action_upgrade4]
convertTo: D_HookTurret
text: The Maw Upgrade
pos: 1
description: The Maw uses a tendril to drag ground units in to devour them.
displayType: action
price: 14000
buildSpeed: 0.0005
ai_isDisabled: false
isLocked: if not self.hasResources(Maw=1)
descriptionAddUnitStats: ${section.convertTo}

alsoTriggerAction: upStat4, upStat_UpdateAlly4

[hiddenAction_upStat4]
@copyFromSection: hiddenAction_Started
takeResources: EAG=-2, EAntiArmour=-3, ETurret=-8
[hiddenAction_upStat_UpdateAlly4]
@copyFromSection: hiddenAction_Started
takeResources_includeUnitsWithinRange_team: allyNotOwn
takeResources: AG=-3, AntiArmour=-3




[hiddenAction_removeTag]
autoTrigger: if self.isControlledByAI() and numberOfUnitsInEnemyTeam(withTag='TiStation', greaterThan=0, withinRange=1000) or self.isControlledByAI() and numberOfUnitsInEnemyTeam(withTag='Titan', greaterThan=0, withinRange=720) or self.isControlledByAI() and self.hp(lessThan=1500)
temporarilyRemoveTags: Safety
temporarilyAddTags: RUN


[hiddenAction_ResetTag]
autoTrigger: if self.isControlledByAI() and not numberOfUnitsInEnemyTeam(withTag='TiStation', greaterThan=0, withinRange=1000) and not numberOfUnitsInEnemyTeam(withTag='Titan', greaterThan=0, withinRange=800) and self.hp(greaterThan=1500)
resetToDefaultTags: true



[graphics]
total_frames: 1

image:        filter.png
image_back: base.png
image_wreak:  NONE

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1




[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3


maxAttackRange: 250
shootDelay: 100
turretMultiTargeting: true



[turret_1]

#right gunning arm

x: 0
y: 5
projectile: 1

turnSpeed: 25
turnSpeedAcceleration: 25

canShoot: true

delay: 30
warmup: 30
invisible: true



[projectile_1]
directDamage: 30
life: 150
speed: 5

image: shot.png

areaDamage: 45
areaRadius: 40

largeHitEffect: true
trailEffect: CUSTOM:projectileTrail
trailEffectRate:1



[effect_projectileTrail]
image: trail.png
life: 25
fadeOut: true
attachedToUnit: false
fadeInTime:1
scaleFrom: 1
scaleTo: 0.5
alpha: 0.6
drawUnderUnits:true
#ySpeedRelative:-1


[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1



[ai]

buildPriority: 0.18
noneInBaseExtraPriority: 0.25

ai_upgradePriority: 0.2


maxEachBase: 3


