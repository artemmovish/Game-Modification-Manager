
[core]
name: HW_HQAI
class: CustomUnitMetadata
price: 0
maxHp: 0
mass: 0
copyFrom: Unit_AI_Base.ini



[hiddenAction_AIR_LIFT]
autoTrigger: false
temporarilyAddTags: DROP_REQ






[hiddenAction_ParkFormationCentre]
autoTrigger: false



[hiddenAction_NoFormation]
autoTrigger: if not self.NumberOfUnitsInTeam(withTag='FormLeader', greaterThan=0) or not self.NumberOfUnitsInTeam(withTag='ALL_ATTACK', greaterThan=0)
temporarilyRemoveTags: Formation



[hiddenAction_Formation]
autoTrigger: false

[hiddenAction_Formation2]
autoTrigger: false
@copyFromSection: hiddenAction_Formation
addWaypoint_target_nearestUnit_tagged: Leader3
addWaypoint_triggerActionIfFailed: Formation3

[hiddenAction_Formation3]
autoTrigger: false
@copyFromSection: hiddenAction_Formation
addWaypoint_target_nearestUnit_tagged: Leader2
addWaypoint_triggerActionIfFailed: Formation4

[hiddenAction_Formation4]
autoTrigger: false
@copyFromSection: hiddenAction_Formation
addWaypoint_target_nearestUnit_tagged: Leader1
addWaypoint_triggerActionIfFailed: AIR_LIFT






[hiddenAction_buildAO]
autoTrigger: false






#Action 3: formation attack
[hiddenAction_LeaderAdvance]
autoTrigger: false



[hiddenAction_RandomAdvance]
autoTrigger: false


[hiddenAction_Advance2]
addWaypoint_type: attackMove



[hiddenAction_BreakFormation]
autoTrigger: false



[hiddenAction_SoloAttack]
autoTrigger: if self.isControlledByAI() and self.tags(includes='Attacking') and not self.tags(includes='Retreat') and not self.hasActiveWaypoint(type='follow')
clearAllWaypoints: false
addWaypoint_prepend: true
addWaypoint_type: follow
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_tagged: Unit
addWaypoint_target_mapMustBeReachable: true

temporarilyRemoveTags: DROP_REQ










[hiddenAction_Fullretreat]
autoTrigger: if self.isControlledByAI() and self.NumberOfUnitsInTeam(withTag='ALL_RUN', greaterThan=0) and not self.hasActiveWaypoint(type='move') and not self.hasUnitInTeam(withTag='Repair', greaterThan=0, withinRange=120) and not self.tags(includes='DEFEND') and self.tags(includes='CanFollow')
clearAllWaypoints: true
addWaypoint_type: move
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_tagged: Repair
temporarilyRemoveTags: Attacking, Formation, BREAK_FORMATION
temporarilyAddTags: RUN










[hiddenAction_Defend]
autoTrigger: if self.isControlledByAI() and self.NumberOfUnitsInTeam(withTag='HELP', greaterThan=0, withinRange=600) and not self.tags(includes='Retreat') and not self.hasActiveWaypoint(type='touchTarget') and not self.tags(includes='CounterAttack') and not self.NumberOfUnitsInTeam(withTag='Unit', greaterThan=20, withinRange=1000)

[hiddenAction_startDefence]
autoTrigger: if self.NumberOfUnitsInTeam(withTag='HELP', greaterThan=0, withinRange=100) and self.tags(includes='DEFEND') and self.numberofUnitsInEnemyTeam(greaterThan=0, withinRange=600)

[hiddenAction_Stop_Defence]
autoTrigger: if self.isControlledByAI() and not self.NumberOfUnitsInTeam(withTag='HELP', greaterThan=0, withinRange=600) and self.tags(includes='CounterAttack') or self.isControlledByAI() and not self.numberofUnitsInEnemyTeam(greaterThan=0, withinRange=600) and self.tags(includes='CounterAttack') or self.isControlledByAI() and not self.NumberOfUnitsInTeam(withTag='Building', greaterThan=0, withinRange=600) and self.tags(includes='CounterAttack')

[hiddenAction_Stop_Defence2]
autoTrigger: false





[hiddenAction_repair]
autoTrigger: if self.isControlledByAI() and self.NumberOfUnitsInTeam(withTag='NeedFix', greaterThan=0, withinRange=500) and not self.NumberOfUnitsInTeam(withTag='ALL_RUN', greaterThan=0) and not self.hasActiveWaypoint(type='setPassiveTarget') and not self.tags(includes='Retreat') and not self.hasActiveWaypoint(type='build') or self.isControlledByAI() and self.NumberOfUnitsInTeam(withTag='NeedFix', greaterThan=0, withinRange=500) and not self.tags(includes='CanFollow') and not self.hasActiveWaypoint(type='setPassiveTarget') and not self.tags(includes='Retreat') and not self.hasActiveWaypoint(type='build')
clearAllWaypoints: false
addWaypoint_prepend: true
addWaypoint_type: setPassiveTarget
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_tagged: NeedFix
addWaypoint_target_mapMustBeReachable: true




#[hiddenAction_NoRepair]
#autoTrigger: if self.isControlledByAI() and not self.NumberOfUnitsInTeam(withTag='NeedFix', greaterThan=0, withinRange=500)
#temporarilyRemoveTags: DEFEND






#Private act 1: Retreat, some units should not withdraw if in a formation. Always withdraw to repair point.


[hiddenAction_retreat]
autoTrigger: if self.isControlledByAI() and self.tags(includes='Retreat') and not self.hasActiveWaypoint(type='touchTarget') and not self.hasUnitInTeam(withTag='Repair', greaterThan=0, withinRange=120)
clearAllWaypoints: true
addWaypoint_prepend: true
addWaypoint_type: touchTarget
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_tagged: Repair
temporarilyRemoveTags: Attacking, CounterAttack, DEFEND, Formation, BREAK_FORMATION



#Enter dropshop
[hiddenAction_enterDropship]
autoTrigger: false
clearAllWaypoints: true
addWaypoint_type: loadInto
addWaypoint_target_randomUnit_maxRange: 9999
addWaypoint_target_randomUnit_team: own
addWaypoint_target_randomUnit_tagged: dropship











#Update health: While in formation, update health whenever it increases. If health drops then add Hurt tag. 
[hiddenAction_UpdateHealth]
autoTrigger: if self.resource(type='hp') > self.resource(type='SaveHP') and self.tags(includes='Formation')
setResourcesWithLogic: SaveHP = self.hp()

[hiddenAction_DetectDamage]
autoTrigger: if self.resource(type='hp') < self.resource(type='SaveHP') and self.tags(includes='Formation')
setResourcesWithLogic: SaveHP = self.hp()
temporarilyAddTags: BREAK_FORMATION





[hiddenAction_CheckHealedBy]
autoTrigger: if self.resource(type='hp') > self.resource(type='SaveHP')
setResourcesWithLogic: SaveHP = self.hp()

[hiddenAction_CallSOS]
autoTrigger: if self.isControlledByAI() and self.resource(type='hp') < self.resource(type='SaveHP') and self.numberofUnitsInEnemyTeam(withTag='Unit', greaterThan=0, withinRange=1000) or self.isControlledByAI() and self.resource(type='hp') < self.resource(type='SaveHP') and self.numberofUnitsInEnemyTeam(withTag='Building', greaterThan=0, withinRange=1000)
setResourcesWithLogic: SaveHP = self.hp()
temporarilyAddTags: HELP

[hiddenAction_CallSOSORBIT]
autoTrigger: if self.isControlledByAI() and self.resource(type='hp') < self.resource(type='SaveHP') and self.numberofUnitsInEnemyTeam(withTag='orbital', greaterThan=0, withinRange=1000)
setResourcesWithLogic: SaveHP = self.hp()
temporarilyAddTags: HELP_ORBIT


[hiddenAction_EndSOS]
autoTrigger: if self.isControlledByAI() and not self.numberofUnitsInEnemyTeam(greaterThan=0, withinRange=1000)or self.isControlledByAI() and self.hp(full=true)
temporarilyRemoveTags: HELP, HELP_ORBIT
setResourcesWithLogic: SaveHP = self.hp()









[graphics]
total_frames: 1
image:       SHARED:blank.png
image_wreak: NONE
image_turret: NONE





image_shadow: AUTO
shadowOffsetX:0.5
shadowOffsetY:0.5




[attack]
canAttack: false
shootDamageMultiplier: 0.75




[movement]
movementType: NONE

