
[core]
name: Ori_barracks
displayText: Barracks
displayDescription: -A housing area for Oriolus infantry. \n-Cannot be used to re-arm infantry.
class: CustomUnitMetadata
price: 1600
maxHp: 2000
mass: 9000

copyFrom: ROOT:Building_AI_Base.ini
tags: NoCap, Factory, Building


#footprint used for collisions with units (left, up, right, down)
footprint: -2,-1,1,1
#used for placement, and placement of other buildings
constructionFootprint: -2, -1, 1, 1

buildingToFootprintOffsetX:0
buildingToFootprintOffsetY:0


techLevel: 1
buildSpeed: 25s
#availableInDemo: true

radius: 35



disableAllUnitCollisions: true




#displayRadius: 35
isBio: false
isBuilding: true


armour: 8


exit_x: 0
exit_y: -1

softCollisionOnAll: 3

#builtFrom_1_name: landFactory
#builtFrom_1_pos:  5





effectOnDeath: CUSTOM:boom1, CUSTOM:boom2


[canBuild_rally]
name: setRally
pos: -1
#isLocked: false
#isLockedMessage: NONE
#isGuiBlinking: if not self.hasUnitInTeam(withTag='anti-orbital', greaterThan=0, withinRange=1000)

[canBuild_1]
name: Ori_Smith
pos: 1
isLocked: if self.isControlledByAI() and self.hasUnitInTeam(withTag='builder', greaterThan=2, withinRange=800)

[canBuild_Scout]
name: Ori_Scout
pos: 2
isLocked: if self.isControlledByAI() and self.hasUnitInTeam(withTag='Small', greaterThan=4) and not self.hasResources(credits=50000) or self.isControlledByAI() and self.hasUnitInTeam(withTag='Small', greaterThan=20)

[canBuild_Drone]
name: Ori_Drone
pos: 2
isLocked: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='Q_Land', greaterThan=0) and self.hasUnitInTeam(withTag='Unit', greaterThan=5) or self.isControlledByAI() and self.hasUnitInTeam(withTag='Small', greaterThan=7) and not self.hasResources(credits=50000)




[canBuild_Knight]
name: Ori_Pollaxe_Land
pos: 3
isLocked: if self.isControlledByAI() and self.NumberOfUnitsInTeam(withTag='Knight', greaterThan=3) and self.NumberOfUnitsInTeam(withTag='Knight') > self.NumberOfUnitsInTeam(withTag='Warlock') * 4

[canBuild_Warlock]
name: Ori_Staff_Land
pos: 3
isLocked: if self.isControlledByAI() and self.NumberOfUnitsInTeam(withTag='Warlock', greaterThan=3) and self.NumberOfUnitsInTeam(withTag='Knight') > self.NumberOfUnitsInTeam(withTag='Support') * 4





#[canBuild_4]
#name: Ori_General_Land
#pos: 4
#addResources: setFlag=2



[action_Build4]
text: Summon Oriolus General
descriptionAddFromUnit: Ori_General_Land
descriptionAddUnitStats: Ori_General_Land
unitShownInUI: Ori_General_Land
ai_considerSameAsBuilding: Ori_General_Land
buildSpeed: 20s
playSoundGlobally:ROOT:SuperWarning.ogg
showMessageToAllEnemyPlayers: WARNING, abnormal entity approaching battlefield. 
pos: 4
price: credits=1400000
alsoQueueAction: buildingSuper


[hiddenAction_buildingSuper]
#autoTrigger: if self.hasFlag(id=2)
highPriorityQueue: true
spawnUnits: Ori_General_Land(offsetHeight=50000)
#addResources: unsetFlag=2
addResources: unsetFlag=1
buildSpeed: 400s



[hiddenAction_EndgameTank1]
autoTrigger: if self.isControlledByAI() and self.hasResources(credits=2200000) and not self.hasFlag(id=1)
alsoQueueAction: Build4
addResources: setFlag=1, credits=-1400000




[hiddenAction_FinishBuild]
buildSpeed: 0.1s
addResources: unsetFlag=1


[hiddenAction_builder1]
autoTrigger: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='builder', greaterThan=0, withinRange=800) and not self.hasUnitInTeam(withTag='builder', greaterThan=20) and self.hasResources(credits=7000) and not self.hasFlag(id=1) or self.isControlledByAI() and self.numberOfUnitsInTeam(withTag='NeedFix', withinRange=500) > self.numberOfUnitsInTeam(withTag='builder', withinRange=600) and self.hasResources(credits=20000) and not self.hasUnitInTeam(withTag='builder', greaterThan=50) and not self.hasFlag(id=1)
alsoQueueAction: builder2
addResources: setFlag=1, credits=-1000

[hiddenAction_builder2]
buildSpeed: 15s
#addResources: credits=-1000
alsoQueueAction: FinishBuild
spawnUnits: Ori_Smith





[graphics]
total_frames: 1

image:        barracks.png
image_back: BarrackFloor.png
image_wreak:  NONE

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1




[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3


maxAttackRange: 0
shootDelay: 100







[effect_boom1]
priority:high

image: SHARED:light_50.png
life: 45
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 4
scaleTo: 1
alpha: 0.8
drawUnderUnits:false


[effect_boom2]
priority:high

image: SHARED:light_50.png
life: 15
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1
scaleTo: 4
alpha: 0.6
drawUnderUnits:false



[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1



[ai]

buildPriority: 0.06

noneInBaseExtraPriority: 0.25

noneGlobalExtraPriority: 0.65

maxEachBase: 1





