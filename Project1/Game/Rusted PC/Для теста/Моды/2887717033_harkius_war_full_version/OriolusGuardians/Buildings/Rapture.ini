
[core]
name: Ori_Rapture
class: CustomUnitMetadata
displayText: Rapture Device
displayDescription: Launches a Rapture probe. \n Creates an enormous blast area. \n -Can be intercepted by anti-nukes. \n-Does not cause friendly fire, but the damage is not that impressive.

#typo in original

isLockedIfGameModeNoNuke:true



price: 40000
maxHp: 3000
mass: 9000

copyFrom: ROOT:Building_AI_Base.ini
tags: Building, NukeLauncher, ReloadingNukes


#footprint used for collisions with units (left, up, right, down)
footprint: -2,-1,1,1
#used for placement, and placement of other buildings
constructionFootprint: -2, -1, 1, 1





disableAllUnitCollisions: true




techLevel: 1
buildSpeed: 0.0001
#availableInDemo: true

radius: 35
#displayRadius: 25
isBio: false
isBuilding: true


effectOnDeath: CUSTOM:boom1, CUSTOM:boom2

exit_x:2
exit_y:1

[action_buildNuke]
price:  13500
text: Arm Rapture Probe
description: Prepares a rapture probe for launch.
displayType: NONE
buildSpeed: 35s
pos: 0.2
isActive:if self.ammoIncludingQueued(lessThan=4)
addResources: ammo=1


[action_launchNuke]
fireTurretXAtGround: siloTop
price:  ammo=1

text: Generate Rapture
description:Launches the Rapture probe
displayType: action
buildSpeed: 1s
pos: 0.1
#whenBuilding_playAnimation: fireNuke
displayRemainingStockpile: true
highPriorityQueue: true
onlyOneUnitAtATime: true
isLocked: if self.isControlledByAI()





[hiddenAction_attack1]
autoTrigger: if self.isControlledByAI() and not self.hasActiveWaypoint(type='attack')
clearAllWaypoints: true
#addWaypoint_prepend: true
addWaypoint_type: attack
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_tagged: Safety

[hiddenAction_attack2]
autoTrigger: if self.isControlledByAI() and numberOfUnitsInEnemyTeam(withTag='Titan', greaterThan=0)
clearAllWaypoints: true
#addWaypoint_prepend: true
addWaypoint_type: attack
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_tagged: Titan


[hiddenAction_attack3]
autoTrigger: if self.isControlledByAI() and numberOfUnitsInEnemyTeam(withTag='Unit', greaterThan=6, withinRange=500)
clearAllWaypoints: true
#addWaypoint_prepend: true
addWaypoint_type: attack
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_tagged: Unit



[hiddenAction_Ready]
autoTrigger: if self.hasResources(ammo=4) and self.hasUnitInTeam(withTag='ReloadingNukes')
temporarilyRemoveTags: ReloadingNukes



[hiddenAction_FullAmmo]
autoTrigger: if self.hasResources(ammo=4) and not self.hasUnitInTeam(withTag='ReloadingNukes')
addResources: setFlag=3

[hiddenAction_EmptyAmmo]
autoTrigger: if not self.hasResources(ammo=1)
addResources: unsetFlag=3
resetToDefaultTags: true

#and self.hasFlag(id=3)








[graphics]
total_frames: 1

image:        Rapture.png
image_back:   NONE
image_wreak:  NONE

drawLayer: bottom

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1


[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
maxAttackRange: 99999


[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1




[turret_AINuke]
#nuke turret
canShoot: true

x: 0
y: 0
idleDir:0

invisible: true

shoot_sound:nuke_launch
shoot_sound_vol:0.27
shoot_light:#FFEECCCC

projectile: nukeProjectile
size: 1

turnSpeed: 40

warmup: 4s
#warmupCallDownRate: 60
delay: 4s


#limitingMinRange: 500
canAttackCondition: if self.isControlledByAI() and self.hasResources(ammo=1) and self.hasFlag(id=3) or self.isControlledByAI() and self.hasResources(ammo=1) and numberOfUnitsInEnemyTeam(withTag='Titan', greaterThan=0, withinRange=1000) or self.isControlledByAI() and self.hasResources(ammo=1) and numberOfUnitsInEnemyTeam(withTag='Unit', greaterThan=6, withinRange=350)
resourceUsage: ammo=1




[turret_siloTop]
#nuke turret
canShoot: false

x: 0
y: 0
idleDir:0

invisible: true

shoot_sound:nuke_launch
shoot_sound_vol:0.27
shoot_light:#FFEECCCC

projectile: nukeProjectile
size: 1

turnSpeed: 40


#shoot_flame:shockwave
shoot_flame:custom:nukeLaunch_wave, custom:nukeLaunch_light
#custom:nukeLaunch_smoke*6


#limitingMinRange: 260

[projectile_nukeProjectile]
#nuke
tags: nuke

directDamage: 123

life: 99999
speed: 0.1
targetSpeed: 3.5
targetSpeedAcceleration:0.02


largeHitEffect: true
ballistic: true
ballistic_delaymove_height:80
ballistic_height: 200
#initialUnguidedSpeedHeight: 0.5
#gravity:0.5


drawType:1

targetGround: true
areaDamage: 2000
areaHitAirAndLandAtSameTime: true
alwaysVisibleInFog: true
areaRadius: 780
areaExpandTime:100
deflectionPower:-1

shouldRevealFog:true
nukeWeapon:true

color: #8fff0000
lightColor: #FF3695ff
lightSize: 1.5
drawSize: 1
drawType:2
frame:4
drawSize: 1.4

friendlyFire: false


explodeEffect: CUSTOM:projectilePassThough, CUSTOM:pulse, CUSTOM:hitLightFlash, CUSTOM:rap1, CUSTOM:rap2, CUSTOM:rap3, CUSTOM:rap4, CUSTOM:rap5, CUSTOM:rap6, CUSTOM:rap7


mutator1_ifUnitWithTags: orbital
mutator1_directDamageMultiplier: 0
mutator1_areaDamageMultiplier: 0









[effect_nukeLaunch_wave]
priority:high

stripIndex:shockwave
life: 50
scaleFrom: 0.5
scaleTo: 2.5

[effect_nukeLaunch_smoke]
priority:high

xOffsetAbsoluteRandom: 10
yOffsetAbsoluteRandom: 10

frameIndex: 0
stripIndex: smoke_black

spawnChance: 0.3

life: 90
fadeOut: true
attachedToUnit: false
#color: #fdc14d
color: #FFEEEE00

fadeInTime:5
scaleFrom: 0.3
scaleTo: 0.8
alpha: 0.9
drawUnderUnits:false
liveAfterAttachedDies: false
hSpeed:0.4
xSpeedAbsoluteRandom:0.9
ySpeedAbsoluteRandom:0.9
dirOffsetRandom:180
atmospheric: true


[effect_nukeLaunch_light]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #FFFFFF
scaleFrom: 1.7
scaleTo: 1.7
alpha: 0.7
drawUnderUnits:false






[effect_lightSlowFade]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.7
scaleTo: 0.7
alpha: 0.5
drawUnderUnits:true


[effect_projectileTrail]
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #63e6e8
fadeInTime:2
scaleFrom: 0.9
scaleTo: 0.4
alpha: 0.6
drawUnderUnits:true
#ySpeedRelative:-1


[effect_projectileLight]
priority:veryhigh

image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #63e6e8
fadeInTime:2
scaleFrom: 1.1
scaleTo: 0.9
alpha: 0.6
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 14
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 2
scaleTo: 1
alpha: 0.6
drawUnderUnits:false

[effect_projectilePassThough]

priority:high
frameIndex: 4
stripIndex: projectiles2
life: 35
fadeOut: true
attachedToUnit: false
color: #FFFFFF
scaleFrom: 2
scaleTo: 0
alpha: 1
drawUnderUnits:false
ySpeedRelative:2
atmospheric: true






[effect_pulse]
life: 25
priority: high

dirOffset: 0
#dirOffsetRandom:90
dirSpeed: 35
#dirSpeedRandom: 15

scaleFrom: 0
scaleTo: 2

#fadeInTime: 25
fadeOut: true

attachedToUnit: true

image: pulse.png

drawUnderUnits: false

#alpha:0.8







[effect_boom1]
priority:high

image: SHARED:light_50.png
life: 45
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 4
scaleTo: 1
alpha: 0.8
drawUnderUnits:false


[effect_boom2]
priority:high

image: SHARED:light_50.png
life: 15
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1
scaleTo: 4
alpha: 0.6
drawUnderUnits:false





[effect_Rap1]
priority:veryhigh

image: effectRaptureSpin1.png
life: 150
fadeOut: true
attachedToUnit: false
#color: #63e6e8

scaleFrom: 0
scaleTo: 2.5
alpha: 1
drawUnderUnits:false
dirSpeed: 35


[effect_Rap2]
priority:critical

image: effectRaptureSpin2.png
life: 125
fadeOut: true
attachedToUnit: false
#color: #63e6e8

scaleFrom: 0
scaleTo: 2.5
alpha: 1
drawUnderUnits:false
dirSpeed: -35




[effect_Rap3]
priority:veryhigh

image: effectRapture.png
life: 80
fadeOut: true
attachedToUnit: false
#color: #63e6e8

scaleFrom: 0
scaleTo: 2
alpha: 1
drawUnderUnits:false

[effect_Rap4]
priority:veryhigh

image: effectRapture.png
life: 120
fadeOut: true
attachedToUnit: false
#color: #63e6e8

scaleFrom: 0
scaleTo: 2
alpha: 1
drawUnderUnits:false

[effect_Rap5]
priority:veryhigh

image: effectRapture.png
life: 140
fadeOut: true
attachedToUnit: false
#color: #63e6e8

scaleFrom: 0
scaleTo: 2
alpha: 1
drawUnderUnits:false

[effect_Rap6]
priority:veryhigh

image: effectRapture.png
life: 160
fadeOut: true
attachedToUnit: false
#color: #63e6e8

scaleFrom: 0
scaleTo: 2
alpha: 1
drawUnderUnits:false



[effect_Rap7]
priority:veryhigh

image: effectRaptureBlast.png
life: 160
fadeOut: true
attachedToUnit: false
#color: #63e6e8

scaleFrom: 0
scaleTo: 3
alpha: 1
drawUnderUnits:false
















[ai]

buildPriority: 0.01

noneInBaseExtraPriority: 0.01

noneGlobalExtraPriority: 0.1


maxEachBase: 1

ai_upgradePriority: 0.2

maxGlobal: 10

