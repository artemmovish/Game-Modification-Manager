
[core]
name: Ori_Arbalast
displayText: Warwolf (Arbalast equip)
displayDescription: The reknowned Warwolf siege knights have broken mighty fortresses where all else have failed. \n -Heavy armour and weapons infantry, can re-arm at upgraded armouries. \n -Cannot swim. \n-The Arbalast is a powerful single shot cannon that fires a shard of Oriolus refining crystal. \n-Bonus damage to building and titans.
class: CustomUnitMetadata
price: 70000
maxHp: 4000
mass: 250000

copyFrom: ROOT:Unit_AI_Base.ini
borrowResourcesWhileAlive: TotalUnit=-1, Ground=-9, Cliff=-9, AG=-9, AA=-3, Artillery=-13, AntiArmour=-10, Armour=-9, AntiLD=-1
tags: Unit, Ground3, Cliff3, AG3, AA2, Range3, Range2, Range AntiArmour3, AntiArmour, Armour3, ALD

techLevel: 1
buildSpeed: 120s
#availableInDemo: true

radius: 16
displayRadius: 20

generation_credits: -80
generation_delay: 40

armour: 30

isBio: true
softCollisionOnAll: 2
selfRegenRate:0.5

transportSlotsNeeded: 5

unitsSpawnedOnDeath: Ori_Arbalast_Heal

#energyMax: 5
#energyRegen: 0.005
#energyNeedsToRechargeToFull: true


autoTriggerCooldownTime: 0.1s


[hiddenAction_Started]
takeResources: EGround=-9, ECliff=-9, EAG=-9, EAA=-3, EArtillery=-13, EAntiArmour=-10, EArmour=-9, EAntiLD=-1
[hiddenAction_Started_UpdateAlly]
takeResources: Ground=-9, Cliff=-9, AG=-9, AA=-3, Artillery=-13, AntiArmour=-10, Armour=-9, AntiLD=-1
[hiddenAction_Killed]
takeResources: EGround=9, ECliff=9, EAG=9, EAA=3, EArtillery=13, EAntiArmour=10, EArmour=9, EAntiLD=1
[hiddenAction_Killed_UpdateAlly]
takeResources: Ground=9, Cliff=9, AG=9, AA=3, Artillery=13, AntiArmour=10, Armour=9, AntiLD=1
#TotalUnit=-1


[action_trigger_switchWarhammer]

convertTo: Ori_Warhammer
buildSpeed: 12s
text: Switch to Warhammers
isVisible: true
isLocked: if not self.hasUnitInTeam(withTag='ArmouryUp', greaterThan=0, withinRange=200)
whenBuilding_cannotMove: true
ai_isDisabled: if self.hasUnitInTeam(withTag='Q_Range', greaterThan=0) or not self.hasUnitInTeam(withTag='Q_AntiArmour', greaterThan=0)
descriptionAddUnitStats: ${section.convertTo}

alsoTriggerAction: upStat, upStat_UpdateAlly

[hiddenAction_upStat]
@copyFromSection: hiddenAction_Started
takeResources: EGround=-9, ECliff=-9, EAG=-11, EArtillery=12, EAntiArmour=-17, EArmour=-18, EAntiLD=-2
[hiddenAction_upStat_UpdateAlly]
@copyFromSection: hiddenAction_Started
takeResources_includeUnitsWithinRange_team: allyNotOwn
takeResources: AG=-11, Artillery=12, AntiArmour=-17, Armour=-18, AntiLD=-2






[hiddenAction_Healed]
autoTrigger: if self.isControlledByAI() and self.hp(greaterThan=3500)
temporarilyRemoveTags: Retreat

[hiddenAction_Damaged]
autoTrigger: if self.isControlledByAI() and self.hp(lessThan=3000)
temporarilyAddTags: Retreat







[graphics]
total_frames: 1

image:        WarwolfArbalast.png
image_wreak:  NONE
image_turret: NONE

image_shadow: AUTO
shadowOffsetX:0.5
shadowOffsetY:0.5

animation_moving_start: 0
animation_moving_end: 0
animation_moving_speed: 0

dustEffect: false

#lock_body_rotation_with_main_turret: true
showEnergyBar: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
canAttackNotTouchingWaterUnits:true

turretSize: 1
turretTurnSpeed: 5

isFixedFiring: true

maxAttackRange: 500
shootDelay: 5

aimOffsetSpread: 0
isMelee: false


[turret_1]
#Pollaxe
x: 0
y: 0
barrelX: 4
barrelY: 6

#invisible: true
projectile: 1

turnSpeed: 4.0
turnSpeedAcceleration: 1.0

canShoot: true


shoot_sound: missile_fire
shoot_sound_vol:0.2

shoot_light:#63e6e8

shoot_flame:CUSTOM:pulse

#warmupStartEffect: CUSTOM:absorb

canShoot: true

delay: 125
warmup:15



[turret_3]
x: 0
y: 0
canShoot: false
turnSpeed: 3.0
turnSpeedAcceleration: 1.0

image_applyTeamColors: true
image: head.png


#[projectile_2]
#directDamage: 150
#speed: 1
#life: 5
#instant: true
#largeHitEffect: true
#deflectionPower: -1
#armourIgnoreAmount: 15
#instantReuseLast: true

#hitSound: false
#explodeEffect: CUSTOM:pulse





[projectile_1]
directDamage: 1000
life: 100
speed: 15

trailEffect: false

image: shard.png

lightColor: #FF3695ff
lightSize: 0.5

largeHitEffect: true
instant:false

deflectionPower: 8
pushForce: 25000
buildingDamageMultiplier: 1.2
mutator1_ifUnitWithTags: Titan
mutator1_directDamageMultiplier: 1.2


[effect_absorb]
life: 25

priority: high

dirOffset: 0
#dirOffsetRandom:90
dirSpeed: 35
#dirSpeedRandom: 15

scaleFrom: 3
scaleTo: 0

fadeInTime: 25
fadeOut: false

attachedToUnit: true

image: absorb.png

drawUnderUnits: false

#alpha:0.8



[effect_pulse]
life: 25
priority: high

dirOffset: 0
#dirOffsetRandom:90
dirSpeed: 35
#dirSpeedRandom: 15

scaleFrom: 0
scaleTo: 2

#fadeInTime: 25
fadeOut: true

attachedToUnit: true

image: pulse.png

drawUnderUnits: false

#alpha:0.8








[attachment_GunR]
x: 8
y: -12
keepAliveWhenParentDies: false
canBeAttackedAndDamaged: false
setDrawLayerOnTop: true
rotateWithParent: true
isUnselectable: true
lockRotation: false
idleDir: 25
resetRotationWhenNotAttacking: true
deattachIfWantingToMove: false
onCreateSpawnUnitOf: WarwolfRGun
prioritizeParentsMainTarget: true




[attachment_GunL]
x: -8
y: -12
keepAliveWhenParentDies: false
canBeAttackedAndDamaged: false
setDrawLayerOnTop: true
rotateWithParent: true
isUnselectable: true
lockRotation: false
idleDir: -25
resetRotationWhenNotAttacking: true
deattachIfWantingToMove: false
onCreateSpawnUnitOf: WarwolfLGun
prioritizeParentsMainTarget: true











[leg_1]
x: -7
y: 0
attach_x: -3
attach_y: 0

moveSpeed: 5

rotateSpeed: 4

heightSpeed: 0.2
resetAngle:25

image_leg:  leg.png
image_foot: foot.png

#draw_foot_on_top: false
#dust_effect: false

#holdDisMin: 0.02
#holdDisMax: 0.04

[leg_2]
x: 7
y: 0
attach_x: 3
attach_y: 0
copyFrom: 1






[movement]
movementType: OVER_CLIFF
moveSpeed: 2
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.02
targetHeight: 1
maxTurnSpeed: 6
turnAcceleration: 1.5

moveSlidingMode :false
moveIgnoringBody:false
