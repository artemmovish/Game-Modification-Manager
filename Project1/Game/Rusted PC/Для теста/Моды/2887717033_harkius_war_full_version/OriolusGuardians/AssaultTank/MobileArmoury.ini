
[core]
name: Ori_Mobile
displayText: Mobile Armoury
displayDescription: -An armoured hover transport\n-well armoured and lightly defended. \n-Can carry units and allows nearby infantry to re-equip weapons.

class: CustomUnitMetadata
price: 30000
maxHp: 5000
mass: 80000



copyFrom: ROOT:Dropship_AI.ini
borrowResourcesWhileAlive: TotalUnit=-1, Ground=-9, Water=-9, AG=-3, AA=-3, Armour=-3
tags: Unit, Ground3, Water3, AG2, AA2, Armour2, dropship, CanFollow, MobArm, Armoury, Rescue, Support



experimental: false

techLevel: 2
buildSpeed: 45s
#availableInDemo: true

numBitsOnDeath: 15

transportSlotsNeeded: 9

generation_credits: -18
generation_delay: 40

radius: 30
displayRadius: 30

isBio: false
softCollisionOnAll: 0

effectOnDeath: CUSTOM:boom1, CUSTOM:boom2



maxTransportingUnits: 8
transportUnitsUnloadDelayBetweenEachUnit: 0.1s
transportUnitsCanUnloadUnits: if not self.isOverLiquid()
armour: 15

autoTriggerCooldownTime: 0.4s


[hiddenAction_Started]
takeResources: EGround=-9, EWater=-9, EAG=-3, EAA=-3, EArmour=-3
[hiddenAction_Started_UpdateAlly]
takeResources: Ground=-9, Water=-9, AG=-3, AA=-3, Armour=-3
[hiddenAction_Killed]
takeResources: EGround=9, EWater=9, EAG=3, EAA=3, EArmour=3
[hiddenAction_Killed_UpdateAlly]
takeResources: Ground=9, Water=9, AG=3, AA=3, Armour=3
#TotalUnit=-1


[hiddenAction_Formation]
autoTrigger: if self.isControlledByAI() and self.tags(includes='CanFollow') and not self.transportingCount(greaterThan=0) and self.NumberOfUnitsInTeam(withTag='FormLeader', greaterThan=0) and not self.tags(includes='Retreat') and not self.hasActiveWaypoint(type='guard') and not self.tags(includes='Override') or self.isControlledByAI() and self.tags(includes='CanFollow') and not self.transportingCount(greaterThan=0) and self.NumberOfUnitsInTeam(withTag='FormLeader', greaterThan=0) and not self.tags(includes='Retreat') and not self.tags(includes='Support ') and not self.hasActiveWaypoint(type='guard') and not self.tags(includes='Override')
# and self.NumberOfUnitsInTeam(withTag='ALL_ATTACK', greaterThan=0)



[hiddenAction_Healed]
autoTrigger: if self.isControlledByAI() and self.hp(greaterThan=4000)
temporarilyRemoveTags: Retreat

[hiddenAction_Damaged]
autoTrigger: if self.isControlledByAI() and self.hp(lessThan=3000)
temporarilyAddTags: Retreat




[hiddenAction_ReturnAI]
autoTrigger: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='SOS', greaterThan=0, withinRange=600) and not self.transportingUnitWithTags(includes='SAVE') and not self.hasUnitInTeam(withTag='SAVE', greaterThan=0, withinRange=100)
temporarilyRemoveTags: Override

[hiddenAction_OverrideAI]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='SOS', greaterThan=0, withinRange=600) or self.isControlledByAI() and self.transportingUnitWithTags(includes='SAVE') or self.isControlledByAI() and self.hasUnitInTeam(withTag='SAVE', greaterThan=0, withinRange=100)
temporarilyAddTags: Override




[hiddenAction_rescue]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='SOS', greaterThan=0, withinRange=600) and not self.hasActiveWaypoint(type='loadUp') and not self.tags(includes='Retreat')
#and not self.hasUnitInTeam(withTag='Safety', greaterThan=0, withinRange=300)
clearAllWaypoints: true
#clearActiveWaypoint: true

#addWaypoint_prepend: true
addWaypoint_type: loadUp
addWaypoint_target_nearestUnit_maxRange: 600
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_tagged: SOS
#alsoQueueAction: rescuePart2



[hiddenAction_rescuePart2]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='SOS', greaterThan=0, withinRange=600) and self.hasActiveWaypoint(type='loadUp') and not self.tags(includes='Retreat')
#and not self.hasUnitInTeam(withTag='Safety', greaterThan=0, withinRange=300)
clearAllWaypoints: false


addWaypoint_prepend: false
addWaypoint_type: loadUp
addWaypoint_target_randomUnit_maxRange: 600
addWaypoint_target_randomUnit_team: own
addWaypoint_target_randomUnit_tagged: SOS










[hiddenAction_rescuePlayer]
autoTrigger: if not self.isControlledByAI() and self.hasUnitInTeam(withTag='SOS', greaterThan=0, withinRange=600) and not self.hasActiveWaypoint(type='loadUp')
# and not self.transportingUnitWithTags(includes='SOS')
#and not self.hasUnitInTeam(withTag='Safety', greaterThan=0, withinRange=300)
clearAllWaypoints: false


#addWaypoint_prepend: true
addWaypoint_type: loadUp
addWaypoint_target_nearestUnit_maxRange: 600
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_tagged: SOS

#alsoQueueAction: rescuePlayerPart2




[hiddenAction_rescuePlayerPart2]
autoTrigger: if not self.isControlledByAI() and self.hasUnitInTeam(withTag='SOS', greaterThan=0, withinRange=600) and self.hasActiveWaypoint(type='loadUp')
#and not self.hasUnitInTeam(withTag='Safety', greaterThan=0, withinRange=300)
clearAllWaypoints: false


#addWaypoint_prepend: true
addWaypoint_type: loadUp
addWaypoint_target_randomUnit_maxRange: 600
addWaypoint_target_randomUnit_team: own
addWaypoint_target_randomUnit_tagged: SOS










[hiddenAction_dropOffWithdraw]
autoTrigger: if self.isControlledByAI() and self.transportingUnitWithTags(includes='SOS') and not self.hasUnitInTeam(withTag='SOS', greaterThan=0, withinRange=600) and not self.hasUnitInTeam(withTag='Safety', greaterThan=0, withinRange=200) and not self.hasActiveWaypoint(type='loadUp') or self.isControlledByAI() and self.transportingUnitWithTags(includes='SAVE') and not self.hasUnitInTeam(withTag='SOS', greaterThan=0, withinRange=600) and not self.hasActiveWaypoint(type='loadUp') or self.isControlledByAI() and self.tags(includes='Retreat') and self.tags(includes='Override')
clearAllWaypoints: true

#addWaypoint_prepend: false
addWaypoint_type: move
addWaypoint_target_nearestUnit_maxRange: 9999
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_tagged: Safety

#or self.isControlledByAI() and self.transportingUnitWithTags(includes='SOS') and not self.isOverOpenLand() and not self.hasUnitInTeam(withTag='SOS', greaterThan=0, withinRange=600) and not self.hasActiveWaypoint(type='loadUp') 
#or self.isControlledByAI() and self.transportingUnitWithTags(includes='SOS') and not self.hasUnitInTeam(withTag='Safety', greaterThan=0, withinRange=200) and not self.hasActiveWaypoint(type='loadUp') 



[hiddenAction_finishedUnload]
buildSpeed: 1.1s
addResources: unsetFlag=1


[hiddenAction_unload]
autoTrigger: if self.isControlledByAI() and self.transportingUnitWithTags(includes='SAVE') and self.hasUnitInTeam(withTag='Safety', greaterThan=0, withinRange=200) and self.isOverOpenLand() and not self.hasFlag(id=1) or self.transportingUnitWithTags(includes='SOS') and self.isControlledByAI() and self.hasUnitInTeam(withTag='Safety', greaterThan=0, withinRange=200) and self.isOverOpenLand() and not self.hasFlag(id=1)
startUnloadingTransport: true
clearAllWaypoints: true
addResources: setFlag=1
alsoQueueAction: finishedUnload




[graphics]
total_frames: 1

image:        MobileArmoury.png
image_wreak:  NONE
image_turret: NONE

image_shadow: AUTO
shadowOffsetX:3
shadowOffsetY:3
#lock_body_rotation_with_main_turret: true



[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3


maxAttackRange: 240
shootDelay: 110

turretMultiTargeting: true
#isFixedFiring: false



[turret_1]
#Pollaxe
x: 3
y: 0

#invisible: true
projectile: 1

turnSpeed: 4.0
turnSpeedAcceleration: 1.0

canShoot: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false

shoot_sound:sound.ogg
shoot_sound_vol:0.1

shoot_light:#63e6e8

shoot_flame:CUSTOM:pulse

#warmupStartEffect: CUSTOM:absorb

canShoot: true
recoilOffset: -2
recoilOutTime: 4
recoilReturnTime: 6

delay: 20
warmup:0

attachedTo: 3
slave: true
image: barrel.png


[turret_2]
x: -3
y: 0
copyFrom: 1
linkDelayWithTurret: 1
warmup: 10
warmupStartEffect: NONE
image: barrel.png




[turret_3]
x: 0
y: 0
image: Turret.png
canShoot: false
shouldResetTurret: true

turnSpeed: 5
delay: 120





[projectile_1]
directDamage: 45
life: 50
speed: 9

trailEffect: false

image: shot.png
drawSize: 1

lightColor: #FF3695ff
lightSize: 0.5

largeHitEffect: true
instant:false





[effect_boom1]
priority:high

image: SHARED:light_50.png
life: 45
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 4
scaleTo: 1
alpha: 0.8
drawUnderUnits:false


[effect_boom2]
priority:high

image: SHARED:light_50.png
life: 15
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1
scaleTo: 4
alpha: 0.6
drawUnderUnits:false





[effect_absorb]
life: 25

priority: high

dirOffset: 0
#dirOffsetRandom:90
dirSpeed: 35
#dirSpeedRandom: 15

scaleFrom: 3
scaleTo: 0

fadeInTime: 25
fadeOut: false

attachedToUnit: true

image: absorb.png

drawUnderUnits: false

#alpha:0.8



[effect_pulse]
life: 25
priority: high

dirOffset: 0
#dirOffsetRandom:90
dirSpeed: 35
#dirSpeedRandom: 15

scaleFrom: 0
scaleTo: 2

#fadeInTime: 25
fadeOut: true

attachedToUnit: true

image: pulse.png

drawUnderUnits: false

#alpha:0.8



#[arm_1]
#x:0
#y:0
#image_end:AssaultTank.png
#image_end_teamColors: true
#drawOverBody: true



[movement]
movementType: HOVER
moveSpeed: 2.1
moveAccelerationSpeed: 0.04
moveDecelerationSpeed: 0.2

reverseSpeedPercentage:0.6

targetHeight: 5
targetHeightDrift: 3

maxTurnSpeed: 2
turnAcceleration: 0.25

moveSlidingMode :true
moveIgnoringBody:true




[ai]

#buildPriority: 0.05

noneInBaseExtraPriority: 0.05

noneGlobalExtraPriority: 0.15

