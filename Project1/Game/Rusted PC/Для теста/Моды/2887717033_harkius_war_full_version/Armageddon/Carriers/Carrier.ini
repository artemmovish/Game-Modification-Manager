
[core]
name: A_Carrier
displayText: Armagedon Carrier
displayDescription: Rapid deployment carrier. \n -Very mobile, well armed.\n-Units will be ejected on death.\n-Can carry any Armageddon Force unit.
class: CustomUnitMetadata
price: 75000
maxHp: 6000
mass: 600000

generation_credits: -45
generation_delay: 40

copyFrom: ROOT:Dropship_AI.ini
borrowResourcesWhileAlive: Air=-3, AG=-1, AA=-1, TotalUnit=-1
tags: Unit, AirT, AG2, AA2, NoCap, CanFollow, dropship, Carrier

techLevel: 2
experimental: true

buildSpeed: 100s
#availableInDemo: true

radius: 45
#displayRadius: 11
isBio: false
softCollisionOnAll: 3

maxTransportingUnits: 12
transportUnitsKillOnDeath: false

selfRegenRate:2.5
#armour: 20

transportUnitsBlockAirAndWaterUnits: false
transportUnitsRequireMovementType: AIR, LAND, OVER_CLIFF, OVER_CLIFF_WATER, HOVER




[hiddenAction_Started]
takeResources: EAir=-3, EAG=-1, EAA=-1
[hiddenAction_Started_UpdateAlly]
takeResources: Air=-3, AG=-1, AA=-1
[hiddenAction_Killed]
takeResources: EAir=-3, EAG=-1, EAA=-1
[hiddenAction_Killed_UpdateAlly]
takeResources: Air=-3, AG=-1, AA=-1
#TotalUnit=-1







[hiddenAction_unload]
autoTrigger: if self.isControlledByAI() and self.transportingCount(greaterThan=0) and self.hasUnitInTeam(withTag='CollectT', greaterThan=0) and not self.transportingUnitWithTags(includes='CollectT') and self.isOverPassableTile(Type='OVER_CLIFF')
startUnloadingTransport: true
clearAllWaypoints: true






[hiddenAction_Collect]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='CollectT', greaterThan=0) and not self.transportingUnitWithTags(includes='CollectT') and not self.transportingCount(greaterThan=0) and not self.tags(includes='Retreat') and not self.hasFlag(id=1)


clearAllWaypoints: false
#clearActiveWaypoint: true

addWaypoint_prepend: true
addWaypoint_type: loadUp
addWaypoint_target_nearestUnit_maxRange: 99999
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_tagged: CollectT





[hiddenAction_attack]
autoTrigger: if self.isControlledByAI() and self.transportingUnitWithTags(includes='CollectT') and not self.hasActiveWaypoint(type='attack')
clearAllWaypoints: true
addWaypoint_prepend: false
addWaypoint_type: attack
addWaypoint_target_nearestUnit_maxRange: 99999
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_tagged: Building




[hiddenAction_unloadNear]
autoTrigger: if self.isControlledByAI() and numberOfUnitsInEnemyTeam(withTag='Building', greaterThan=0, withinRange=200) and self.transportingUnitWithTags(includes='CollectT') and not self.hasFlag(id=1) or self.isControlledByAI() and numberOfUnitsInEnemyTeam(withTag='Titan', greaterThan=0, withinRange=200) and self.transportingUnitWithTags(includes='CollectT') and not self.hasFlag(id=1)
startUnloadingTransport: true
clearAllWaypoints: true
addResources: setFlag=1


[hiddenAction_resetFlags]
autoTrigger: if self.isControlledByAI() and not self.transportingCount(greaterThan=0) and self.hasFlag(id=1)
alsoQueueAction: finishedUnload


[hiddenAction_finishedUnload]
buildSpeed: 5s
addResources: unsetFlag=1



[hiddenAction_Healed]
autoTrigger: if self.isControlledByAI() and self.hp(greaterThan=5000)
temporarilyRemoveTags: Retreat

[hiddenAction_Damaged]
autoTrigger: if self.isControlledByAI() and self.hp(lessThan=3000)
temporarilyAddTags: Retreat



[hiddenAction_ReturnAI]
autoTrigger: if self.isControlledByAI() and not self.hasUnitInTeam(withTag='CollectT', greaterThan=0) and not self.transportingUnitWithTags(includes='CollectT')
temporarilyRemoveTags: Override

[hiddenAction_OverrideAI]
autoTrigger: if self.isControlledByAI() and self.hasUnitInTeam(withTag='CollectT', greaterThan=0) or self.isControlledByAI() and self.transportingUnitWithTags(includes='CollectT')
temporarilyAddTags: Override





[hiddenAction_unloadRetreat]
autoTrigger: if self.isControlledByAI() and self.transportingCount(greaterThan=0) and self.tags(includes='Retreat') and not self.hasFlag(id=1)


#Unload when near enemy base
[hiddenAction_unloadEnemy]
autoTrigger: false



#unload when near FormLeader
[hiddenAction_unloadFormation]
autoTrigger: false



[graphics]
total_frames: 1

image:        carrier.png
image_wreak:  NONE
image_turret: NONE



image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1


[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 1
turretTurnSpeed: 5

#isFixedFiring: true

maxAttackRange: 225

shootDelay: 5

[turret_1]
x: 0
y: 10

turnSpeed: 5

delay: 20

invisible: true

projectile: 1

turnSpeed: 99
turnSpeedAcceleration: 1

shoot_sound: large_gun_fire2
shoot_sound_vol:0.2
canShoot: true
shoot_flame:small


canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false


warmup: 15






[projectile_1]
speed: 10
drawSize: 0.7
#drawType:2

image: LargeBolt.png

lightColor: #ffe92b
lightSize: 0.4

directDamage: 160
areaDamage: 75
areaRadius: 80

largeHitEffect: true


life: 90
trailEffect: true
deflectionPower: 2
pushForce: 10000



[movement]
movementType: AIR
moveSpeed: 1.7
moveAccelerationSpeed: 0.03
moveDecelerationSpeed: 0.05

landOnGround: true


maxTurnSpeed: 1
turnAcceleration: 0.1

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  45


slowDeathFall: true



